!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function a(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var s="expires="+a.toUTCString();document.cookie=e+"="+t+";"+s+";path=/;SameSite=Lax"}function s(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var s=n[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}function o(e){for(var t=String(e),n=t.length-1,a=Math.trunc(n/3),s=0;s<a;s++)t=t.replace(",","");return Number(t)}n.r(t),jQuery.noConflict(),function(e){var t,n,r,i,l,d,c,u,p,f,m,v,h,y,k;function g(a){a=Number(a);for(var s=t.terms.term.length,o=0;o<s;o++){var d=t.terms.term[o].minloan,c=t.terms.term[o].maxloan;a>=d&&a<=c&&(i=t.terms.term[o].min,l=t.terms.term[o].max,e("#lowerAmt").html("&pound;"+n.formatMoney(2)),e("#upperAmt").html("&pound;"+r.formatMoney(2)),e("#lowerTerm").html(i),e("#upperTerm").html(l))}}function C(){setTimeout(function(){var t=e("#resultsStep").height(),n=e("#repExampleBottom").height();t=t+Math.floor(n)+110,!0===e("#resultsStep").is(":visible")?(e(document).find("#tiles").css("height",t+"px"),e(document).find("#tiles").css("max-height",t+"px")):($$(document).find("#tiles").css("height","450px"),$$(document).find("#tiles").css("max-height","450px"))},200)}function b(){var t=e("#loanTerm").val();t<i&&(t=i),t>l&&(t=l),e("#loanTerm").val(t),_(t)}function S(){var n,a,s=o(e("#loanAmount").val()),r=Number(e("#loanTerm").val());if(!1===m)for(var i=t.rates.product[0].rate.length,d=0;d<i;d++){var c=Number(t.rates.product[0].rate[d].min),p=Number(t.rates.product[0].rate[d].max),f=Number(t.rates.product[0].rate[d].minterm);Number(t.rates.product[0].rate[d].maxterm),s>=c&&s<=p&&r>=f&&r<=l&&(u=Number(t.rates.product[0].rate[d].apr).toFixed(1))}else if(!0===m)for(i=t.rates.product[1].rate.length,d=0;d<i;d++)c=Number(t.rates.product[1].rate[d].min),p=Number(t.rates.product[1].rate[d].max),f=Number(t.rates.product[1].rate[d].minterm),Number(t.rates.product[1].rate[d].maxterm),s>=c&&s<=p&&r>=f&&r<=l&&(u=Number(t.rates.product[1].rate[d].apr).toFixed(1));e("#repAIR").html(u+"%"),e("#repAPR").html(u+"%");var y=u,k=Math.pow(1+y/100,1/12)-1,g=r,C=s;if(0==v)n=k*C/(1-Math.pow(1+k,-Math.abs(g))),a=Number(n.toFixed(2))*r;else{var b=C;for(d=0;d<h;d++)b+=b*k;n=k*b/(1-Math.pow(1+k,-Math.abs(g))),a=Number(n.toFixed(2))*r}e("#repMonthlyRepay").html("&pound;"+n.formatMoney(2)),e("#repTotalRepay").html("&pound;"+a.formatMoney(2))}e(".money").on("keyup",function(t){if(""===window.getSelection().toString()&&-1===e.inArray(event.keyCode,[38,40,37,39])){var n=e(this).val();(n=n.replace(/[\D\s\._\-]+/g,""))&&(n=parseInt(n,10)),e(this).val(function(){return 0==n?"":n.toLocaleString("en-US")})}}),Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},Number.prototype.formatMoney=function(e,t,n){var a=this,s=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?".":t,n=null==n?",":n,a<0?"-":""),o=String(parseInt(a=Math.abs(Number(a)||0).toFixed(e))),r=(r=o.length)>3?r%3:0;return s+(r?o.substr(0,r)+n:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?t+Math.abs(a-o).toFixed(e).slice(2):"")},(k=new XMLHttpRequest).onreadystatechange=function(){if(4==this.readyState&&200==this.status){var u=String(this.responseText);!function(u){(function(e){r=Number(e.opt.amt_max._value),n=Number(e.opt.amt_min._value),l=Number(e.opt.term_max._value),i=Number(e.opt.term_min._value),d=Number(e.opt.amt_step._value),c=Number(e.opt.term_step._value),h=Number(e.opt.defer_months._value)})(t=u),function(){var d,u,h,k,C,S=String(window.location.href);function N(e){var t=S.slice(k+1,S.length);return h=e+"=",t=t.replace(h,""),u=t.search("\\&"),h="&"+e+"=",h+=String(C),S=S.replace(h,""),t.slice(0,u)}(k=S.search("\\?"))>-1&&(S=S.slice(k+1,S.length),(k=(S="&"+S+"&").search("\\&la="))>-1&&(C=N("la"),(C=Number(C))<=n&&(C=n),C>=r&&(C=r),C=String(C),p=Number(C)),(k=S.search("\\&t="))>-1&&(C=N("t")),(k=S.search("\\&nc="))>-1&&(C=N("nc")),(k=S.search("\\&ph="))>-1&&(C=N("ph")),(k=S.search("\\&subid="))>-1&&a("subid",C=N("subid"),60)),""===(d=s("subid"))&&801===d||a("subid",y=801,60),p=""!=(d=s("loanAmount"))?Number(d):1e4,f=""!=(d=s("loanTerm"))?Number(d):60,""!=(d=s("loanNectar"))&&(m="true"==d),v=""!=(d=s("loanDefer"))&&"true"==d,p<=n?p=n:p>=r&&(p=r);for(var w=t.terms.term.length,T=0;T<w;T++){var R=t.terms.term[T].minloan,I=t.terms.term[T].maxloan;p>=R&&p<=I&&(i=t.terms.term[T].min,l=t.terms.term[T].max,f<=i?f=i:f>=l&&(f=l))}e("#loanTerm").val(f),1==m?e(".nectarYes").addClass("active"):0==m&&e(".nectarNo").addClass("active"),1==v?(e(".deferYes").addClass("active"),e(".deferYes").attr("tabindex","0"),e(".deferYes").attr("aria-checked","true")):(e(".deferNo").addClass("active"),e(".deferNo").attr("tabindex","0"),e(".deferNo").attr("aria-checked","true")),e("#loanAmount").change(function(t){var a=o(e("#loanAmount").val());a<n&&(a=n),a>r&&(a=r),x(a);var s=a.formatMoney(0);e("#loanAmount").val(s)}),e("#loanTerm").change(function(t){var n=Number(t.target.value);n<=i&&(n=i),n>=l&&(n=l),n%c!=0&&(n=Math.trunc(n/c)*c),b(),e("#loanTerm").val(n),_(n)});var Y=p.formatMoney(0);e("#loanAmount").val(Y),b(),g(p),M(p)}()}(N(u))}},k.open("GET","/~/media/sb/xml/apr-rate-tables",!0),k.send(),e(window).resize(function(){C()});var N=function(e,t){if(void 0===t&&(t=!0),"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml")),e instanceof Node){var n=e;if(9==n.nodeType)for(n=n.firstChild;1!=n.nodeType&&null!=n.nodeType;)n=n.nextSibling;return function e(n){var a={};if(1!=n.nodeType)return null;if(n.attributes.length>0){t||(a._attributes={});for(var s=0;s<n.attributes.length;s++){var o=n.attributes.item(s);t?a[o.nodeName]=o.nodeValue:a._attributes[o.nodeName]=o.nodeValue}}if(n.hasChildNodes()){var r=n.firstChild;do{if(3==r.nodeType){if(0==r.nodeValue.replace(/\s*/,"").length)continue;void 0===a._value?a._value=r.nodeValue:(void 0===a._value.push&&(a._value=[a._value]),a._value.push(r.nodeValue))}1==r.nodeType&&(void 0===a[r.nodeName]||null==a[r.nodeName]?a[r.nodeName]=e(r):(void 0===a[r.nodeName].push&&(a[r.nodeName]=[a[r.nodeName]]),a[r.nodeName].push(e(r))))}while(null!=(r=r.nextSibling))}return a}(n)}return null};function x(e){b(),M(e),g(e),S()}function w(t){var a=t.target,s=o(e("#loanAmount").val());1==e(a).hasClass("plus")?(s+=d)>r&&(s=r):1==e(a).hasClass("minus")&&(s-=d)<n&&(s=n);var i=s.formatMoney(0);e("#loanAmount").val(i),x(s)}function M(t){var n=t.formatMoney(0);e("#repAmount").html("&pound;"+n)}function T(t){var n=t.target,a=Number(e("#loanTerm").val());1==e(n).hasClass("plus")?a+=c:1==e(n).hasClass("minus")&&(a-=c),a<=i&&(a=i),a>=l&&(a=l),e("#loanTerm").val(a),_(a)}function _(t){var n=String(t)+" months";e("#repTerm").html(n),S()}function R(e){m=e,S()}function I(e){v=e,S()}function Y(){e("#stepsModal").addClass("finalStep"),C(),e("#nectarStep").css("display","none");var t=o(e("#loanAmount").val()),n=Number(e("#loanTerm").val());!1===m&&t>25e3&&n<=60?(e("#declineStep1").addClass("fadeInRight"),e("#declineStep1").css("display","flex")):!1===m&&t>25e3&&n>60?(e("#declineStep3").addClass("fadeInRight"),e("#declineStep3").css("display","flex")):!1===m&&t<=25e3&&n>60?(e("#declineStep2").addClass("fadeInRight"),e("#declineStep2").css("display","flex")):(e("#loansTCs").css("display","flex"),e("#repExampleBottom").addClass("wider"),e("#resultsStep").addClass("finalStep"),e("#resultsStep").addClass("fadeInRight"),e("#resultsStep").css("display","flex"),e("#tiles").addClass("finalStep")),e("#stepsRoundel").addClass("hidden")}e("#s-up-amount").click(function(e){e.preventDefault(),w(e)}),e("#s-down-amount").click(function(e){e.preventDefault(),w(e)}),e("#s-up-term").click(function(e){e.preventDefault(),T(e),S()}),e("#s-down-term").click(function(e){e.preventDefault(),T(e),S()}),e("#nectarNo").click(function(t){t.preventDefault(),e("#nectarNo").addClass("active"),e("#nectarYes").removeClass("active"),R(!1),Y()}),e("#nectarYes").click(function(t){t.preventDefault(),e("#nectarYes").addClass("active"),e("#nectarNo").removeClass("active"),R(!0),Y()}),e(".deferNo").click(function(){e(".deferNo").addClass("active"),e(".deferNo").attr("tabindex","0"),e(".deferYes").attr("tabindex","-1"),e(".deferNo").attr("aria-checked","true"),e(".deferYes").attr("aria-checked","false"),e(".deferYes").removeClass("active"),I(!1)}),e(".deferYes").click(function(){e(".deferYes").addClass("active"),e(".deferYes").attr("tabindex","0"),e(".deferNo").attr("tabindex","-1"),e(".deferYes").attr("aria-checked","true"),e(".deferNo").attr("aria-checked","false"),e(".deferNo").removeClass("active"),I(!0)}),e(".radioOption").on("keydown",function(t){var n=e(this).attr("id"),a=t.keyCode;13===a&&e(this).click(),37!==a&&38!==a&&39!==a&&40!==a||("deferNo"==n&&(e("#deferYes").click(),e("#deferYes").focus()),"deferYes"==n&&(e("#deferNo").click(),e("#deferNo").focus()))}),e(".question1 .moneyInputContianer").click(function(){e("#loanAmount").focus()}),e("#applyNext").click(function(t){t.preventDefault();var n="https://www.sainsburysbank.co.uk/borrowing/sainsburys_loan_calculator_eligibility?";n+="pr=ln",n+="&t="+String(e("#loanTerm").val()),n+="&la="+String(o(e("#loanAmount").val())),n+=1==m?"&nc=1":"&nc=0",n+=1==v?"&ph=true":"&ph=false",n+="&subid="+y,n+="&pcat=1",window.location.href=n}),e("input[type=number]").on("focus",function(){e(this).on("keydown",function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault()})}),document.cookie="loanNectar=null; expires=Thu, 01 Jan 1970 00:00:01 GMT;",e(document).on("click","#loansSteps",function(t){t.preventDefault(),e(".buttons.toplevel.animated").addClass("tilesHidden"),e("#stepsRoundel").removeClass("hidden"),e("#stepsModal").fadeIn(),e("#stepsModal").css("display","flex"),e("#amountStep").addClass("fadeInRight"),e("#amountStep").css("display","flex")}),e("#amountNext").click(function(t){t.preventDefault(),e("#amountStep").css("display","none"),e("#termStep").addClass("fadeInRight"),e("#termStep").css("display","flex")}),e("#termNext").click(function(t){t.preventDefault(),e("#termStep").css("display","none"),e("#nectarStep").addClass("fadeInRight"),e("#nectarStep").css("display","flex")}),e("#changeLoanAmount, #returnToStart").click(function(t){t.preventDefault(),e("#declineStep1").removeClass("finalStep"),e("#declineStep1").removeClass("fadeInRight"),e("#declineStep1").css("display","none"),e("#declineStep3").removeClass("finalStep"),e("#declineStep3").removeClass("fadeInRight"),e("#declineStep3").css("display","none"),e(".buttons.toplevel.animated").addClass("tilesHidden"),e("#stepsRoundel").removeClass("hidden"),e("#stepsModal").fadeIn(),e("#stepsModal").css("display","flex"),e("#amountStep").addClass("fadeInRight"),e("#amountStep").css("display","flex")}),e("#changeLoanTerm").click(function(t){t.preventDefault(),e("#declineStep2").removeClass("finalStep"),e("#declineStep2").removeClass("fadeInRight"),e("#declineStep2").css("display","none"),e(".buttons.toplevel.animated").addClass("tilesHidden"),e("#stepsRoundel").removeClass("hidden"),e("#stepsModal").fadeIn(),e("#stepsModal").css("display","flex"),e("#termStep").addClass("fadeInRight"),e("#termStep").css("display","flex")}),e(".newCustomerJourney").click(function(){e("#resultsStep").css("display","none"),e("#loansTCs").css("display","none"),e("#repExampleBottom").removeClass("wider"),window.location.href="https://online.sainsburysbank.co.uk/servicing/signin",e("#stepsRoundel").addClass("hidden")}),e("#register").click(function(t){t.preventDefault(),e("#onlineBankingStep").css("display","none"),window.location.href="https://online.sainsburysbank.co.uk/servicing/register",e("#stepsRoundel").addClass("hidden")}),e("#login").click(function(t){t.preventDefault(),e("#onlineBankingStep").css("display","none"),window.location.href="https://online.sainsburysbank.co.uk/servicing/signin",e("#stepsRoundel").addClass("hidden")}),e("#presentCustomerYes").click(function(t){t.preventDefault(),e("#presentCustomerNo").removeClass("active"),e("#presentCustomerYes").addClass("active"),e("#presentCustomerStep").css("display","none"),e("#onlineBankingStep").addClass("fadeInRight"),e("#onlineBankingStep").css("display","flex")}),e("#presentCustomerNo").click(function(t){t.preventDefault(),e("#presentCustomerYes").removeClass("active"),e("#presentCustomerNo").addClass("active"),e("#applyNow").css("display","flex")}),e(".onlineBankingYes").click(function(t){t.preventDefault(),e("#onlineBankingNo").removeClass("active"),e("#onlineBankingYes").addClass("active"),e("#register").css("display","none"),e("#login").css("display","flex")}),e(".onlineBankingNo").click(function(t){t.preventDefault(),e("#onlineBankingYes").removeClass("active"),e("#onlineBankingNo").addClass("active"),e("#login").css("display","none"),e("#register").css("display","flex")}),e(".closeButton").click(function(){e(this).parent(".step").fadeOut(),e("#repExampleBottom").removeClass("wider"),e("#loansTCs").css("display","none"),e("#stepsModal").fadeOut(),e("#stepsModal").removeClass("finalStep"),e("#tiles").removeClass("finalStep"),e(".buttons.toplevel.animated").removeClass("tilesHidden"),e("#amountStep").removeClass("fadeInLeft"),e("#amountStep").addClass("fadeInRight"),e(".tiles").attr("style","")}),e("#editSteps").click(function(t){t.preventDefault(),e("#stepsModal").removeClass("finalStep"),e("#repExampleBottom").removeClass("wider"),e("#loansTCs").css("display","none"),e("#tiles").removeClass("finalStep"),e("#resultsStep").css("display","none"),e("#amountStep").addClass("fadeInLeft"),e("#amountStep").css("display","flex"),e("#stepsRoundel").removeClass("hidden"),e(".tiles").attr("style","")}),e(".backButton").click(function(t){!function(t){var n=t.parentElement;e(n).css("display","none");var a=e(document.getElementById(t.getAttribute("id").replace("Back","")));e(a).addClass("fadeInRight"),e(a).css("display","flex"),e("html, body").animate({scrollTop:e(document.getElementById("Home"))},500)}(t.delegateTarget)}),e("#amountNext").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e(".closeButton").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#nectarYes").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#nectarNo").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#editSteps").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#presentCustomerYes").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#presentCustomerNo").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#onlineBankingYes").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#onlineBankingNo").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e(".backButton").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#changeLoanAmount").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e(".changeLoanTerm").on("keydown",function(t){13===t.keyCode&&e(this).click()}),e("#returnToStart").on("keydown",function(t){13===t.keyCode&&e(this).click()})}(jQuery)}]);