"use strict";function SetCookieForKeepAlive(){var n=new Date,t;n.setTime(n.getTime()+3e4);t="expires="+n.toGMTString();document.cookie="keepalive=true; "+t}function GetCookieForKeepAlive(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++)if(t=u[i].trim(),t.indexOf(r)==0)return t.substring(r.length,t.length);return""}var da=function(){function f(n){function t(){}return t.prototype=n,new t}function e(n,t){var i=f(t.prototype);i.constructor=n;n.prototype=i}function o(n){for(var i,u=n.split("."),t=undefined,r=0;r<u.length;r++)i=u[r],r===0?t=window[i]||{}:(t[i]=t[i]||{},t=t[i])}function s(n){for(var t,u=n.split("."),i,r=0;r<u.length;r++)t=u[r],r===0?i=window[t]||!1:i[t]=i[t]||!1,i||alert("The object "+n+"does not exist on "+t)}function h(n,t){return t&&(r[n]=t),r[n]}function c(t,i,r){return i&&(n[t]=i),n[t]?n[t]:r?n[r]:""}function l(n,r){r?i.push(n):t.push(n)}function u(){for(var n=0;n<t.length;n++)t[n]()}function a(){i.length>0?$.when.apply($,i).always(function(){u()}):u()}function v(){da.debug&&da.debug.log(arguments)}var t=[],i=[],r={},n={},y=function(){function t(t,i){n[t]||(n[t]=i,$.event.trigger({type:t+"Loaded"}))}function i(t){for(var i in n)i in t&&(t[i]=n[i])}function r(t){return n[t]}var n={};return{add:t,inject:i,get:r}}();return{provide:o,require:s,inherit:e,onInit:l,init:a,injector:y,editMode:!1,log:v,global:h,errorMessages:c}}(),currentWindowWidth;Date.prototype.addDays=function(n){return this.setDate(this.getDate()+n),this};Date.prototype.addHours=function(n){return this.setHours(this.getHours()+n),this};typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.filter||(Array.prototype.filter=function(n){var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});String.prototype.includes||(String.prototype.includes=function(n,t){return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,t){function e(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)}var f,i,r,u;if(this==null)throw new TypeError('"this" is null or not defined');if(f=Object(this),i=f.length>>>0,i===0)return!1;for(r=t|0,u=Math.max(r>=0?r:i-Math.abs(r),0);u<i;){if(e(f[u],n))return!0;u++}return!1}});String.prototype.includes||(String.prototype.includes=function(n,t){return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1}),function(){function n(n,t,i,r,u){var f=i.block,e=i["else"];return f&&u()?n.render(i.block,t):e?n.render(i["else"],t):n}dust.helpers.formatCurrency=function(n,t,i,r){var u=dust.helpers.tap(r.amount,n,t),f="$",e;return u<0&&(f="-$",u=u*-1),e=da.helpers.formatCurrency(u),n.write(f+e)};dust.helpers.formatCurrencyNoDecimal=function(n,t,i,r){var u=dust.helpers.tap(r.amount,n,t),e=da.helpers.formatCurrencyNoDecimal(u),f="$";return u<0&&(f="-$",u=u*-1),n.write(f+e)};dust.helpers.formatBalanceWithCommaNoDecimal=function(n,t,i,r){var u=dust.helpers.tap(r.amount,n,t),e=da.helpers.formatBalanceWithCommaNoDecimal(u),f="$";return u<0&&(f="-$",u=u*-1),n.write(f+e)};dust.helpers.formatLastPaymentAmount=function(n,t,i,r){var u=dust.helpers.tap(r.amount,n,t),f;return u>0?(f=da.helpers.formatCurrency(u),n.write("$"+f)):n.write("")};dust.helpers.formatLastPaymentDate=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t),f="";return u&&(f=da.helpers.formatDateAsDDMMMYYYY(isNaN(u)?u:new Number(u)),f==="01 Jan 0001"&&(f="")),n.write(f)};dust.helpers.htmlDecode=function(n,t,i,r){var u=dust.helpers.tap(r.text,n,t),f;return u||(u=""),f=da.helpers.htmlDecode(u).replace(/\"/g,"&quot;"),n.write(f)};dust.helpers.cardNumber=function(n,t,i,r){var u=dust.helpers.tap(r.text,n,t),e=dust.helpers.tap(r.length,n,t),f;return u||(u=""),e&&(u=u.slice(e)),f=u.replace(/\####/g,"&bull;&bull;&bull;&bull;&nbsp;&nbsp;"),f=f.replace(/\###/g,"&bull;&nbsp;&bull;&nbsp;&bull;&nbsp;&nbsp;"),n.write(f)};dust.helpers.htmlDecodeText=function(n,t,i,r){var u=dust.helpers.tap(r.text,n,t),f;return u||(u=""),f=da.helpers.htmlDecodeText(u),n.write(f)};dust.helpers.vmif=function(n,t,i,r){var u=i.block,f=i["else"];if(r&&r.fn){if(t.global[r.fn](n,t,i,r))return u?n.render(i.block,t):(da.log("Missing body block in the if helper!"),n);if(f)return n.render(i["else"],t)}else da.log("No condition given in the if helper!");return n};dust.helpers.vmCall=function(n,t,i,r){t.global[r.fn](n,t,i,r)};dust.helpers.formatDateAsDOW=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateAsDOW(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateAsDDMMMMYYYY=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateAsDDMMMMYYYY(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateAsDDMMMYYYY=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateAsDDMMMYYYY(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateAsFullDate=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateAsFullDate(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateWithTime=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateWithTime(isNaN(u)?u:new Number(u),r.showTimeZoneSuffix))};dust.helpers.formatShortDateWithTime=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatShortDateWithTime(isNaN(u)?u:new Number(u),r.showTimeZoneSuffix))};dust.helpers.formatDateWithTimeMail=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateWithTimeMail(isNaN(u)?u:new Number(u)))};dust.helpers.formatTime=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatTime(isNaN(u)?u:new Number(u),r.showTimeZoneSuffix))};dust.helpers.formatDateAsShortTime=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatToShortTime(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateAsTime=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatToTime(isNaN(u)?u:new Number(u)))};dust.helpers.formatDateAsStandard=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatDateAsStandard(isNaN(u)?u:new Number(u)))};dust.helpers.formatShortDate=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t);return n.write(da.helpers.formatShortDate(isNaN(u)?u:new Number(u)))};dust.helpers.formatDate=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t),f=undefined;return isNaN(u)?f=da.global("jsondateformat"):u=new Number(u),n.write(da.helpers.formatDate(u,r.format=="long"?!0:!1,f))};dust.helpers.formatDateExpiry=function(n,t,i,r){var u=dust.helpers.tap(r.date,n,t),f=da.helpers.formatDateAsMMYY(isNaN(u)?u:new Number(u));return n.write(da.helpers.formatExpireDate(f))};dust.helpers.formatBalance=function(n,t,i,r){var u=dust.helpers.tap(r.amount,n,t),e="$",f;return u<0&&(e="-$",u=u*-1),f=da.helpers.formatCurrency(u).split("."),n.write("<span class='dollar'>"+e+"<\/span>"+f[0]+".<span class='cents'>"+f[1]+"<\/span>")};dust.helpers.truncate=function(n,t,i,r){var u=dust.helpers.tap(r.data,n,t),f=dust.helpers.tap(r.length,n,t),e=u.length>f?u.substr(0,f)+"...":u;return n.write(e)};dust.helpers.stringFormat=function(n,t,i,r){var f=dust.helpers.tap(r.str,n,t),e=dust.helpers.tap(r.replace,n,t),o=JSON.parse("["+e.replace(/'/g,'"')+"]"),u=da.helpers.stringFormat(f,o);return r.decodeText&&r.decodeText=="true"?dust.helpers.htmlDecodeText(n,t,i,{text:u}):n.write(u)};dust.helpers.stringIsNullOrEmpty=function(t,i,r,u){var f=dust.helpers.tap(u.value,t,i);return n(t,i,r,u,function(){return da.helpers.isStringNullOrEmpty(f)})};dust.helpers.stringContains=function(t,i,r,u){var f=dust.helpers.tap(u.str,t,i),e=dust.helpers.tap(u.value,t,i);return n(t,i,r,u,function(){return f.includes(e)})};dust.helpers.formatTrueFalse=function(n,t,i,r){var u=dust.helpers.tap(r.bool,n,t);return n.write(da.helpers.formatTrueFalse(u.toString().toLowerCase()))};dust.helpers.formatBoolean=function(n,t,i,r){var u=dust.helpers.tap(r.bool,n,t);return n.write(da.helpers.formatBoolean(u.toString().toLowerCase()))};dust.helpers.formatEmptyDash=function(n,t,i,r){var u=dust.helpers.tap(r.val,n,t);return n.write(da.helpers.formatEmptyDash(u))};dust.helpers.formatReadableMb=function(n,t,i,r){var u=dust.helpers.tap(r.mb,n,t);return n.write(da.helpers.formatReadableMb(u))};dust.helpers.customSort=function(n,t,i,r){var u=r.orderBy;return r.items.sort(function(n,t){return n[u]<t[u]?-1:n[u]>t[u]?1:0}),n}}();da.provide("da.services.DataService");da.services.DataService=function(){var n=this,t;if(this._cache=[],this._errorWidget=new da.ui.ErrorWidget,this._queue=[],this._configLoaded=!1,this.eventService=null,da.injector.inject(this),this.configLoadEvent=new da.events.PubSub("ConfigLoaded"),this.ajaxLoad=function(n,t){var i=this,r=$.ajax(n.Config());return r.done(function(i){!t&&da.isAuth&&da.helpers.resetTimeout();n.Deferred().resolve(i)}).fail(function(t){da.log(n,t);t.status!==0&&(da.services.DataService.handleError(t),n.ShowCustomError()||i._errorWidget.show(t.responseJSON));n.Deferred().reject(t)})},this.loadAndCache=function(t,i,r,u){var f=new da.util.AjaxRequest(t,u,i?"POST":"GET",!0,r);return n.ajaxLoad(f).done(function(i){n._cache[t]=i}).fail(function(n){da.log(t,n)})},da.editMode)n._cache.configuration={};else{t=[];t.push(this.ajaxLoad(new da.util.AjaxRequest("configuration"),!0).done(function(t){n._cache.configuration=t;n.configLoadEvent.publish()}));da.onInit(t[0],!0);$.when.apply($,t).then(function(){if(n._configLoaded=!0,n._queue.length>0)do n.ajaxLoad(n._queue.pop());while(n._queue.length>0)})}};da.services.DataService.prototype={load:function(n,t,i,r,u,f){var e=new da.util.AjaxRequest(n,t,i,r,u);return da.editMode?e.Deferred().promise():(this._configLoaded?this.ajaxLoad(e,f):this._queue.push(e),e.Deferred().promise())},sharedServiceLoad:function(n,t,i,r,u){var f=null;return da.IsAdmin&&(f=da.AdminPlatformUrl),this.load(n,t,i,r,f,u)},getData:function(n){return da.editMode?this._cache[n]?this._cache[n]:{}:this._cache[n]},preFetch:function(n,t,i,r){return this.loadAndCache(n,t,i,r)},subscribeConfigLoaded:function(n){this.configLoadEvent.subscribe(n)}};da.services.DataService.getErrorMessage=function(n){if(!n)return"";var i=$.parseJSON(n.responseText),t=da.errorMessages(i.Code);return t||(t=i.Message),t};da.services.DataService.handleError=function(n){if(n&&n.responseJSON&&n.responseJSON.Code){da.debug&&console.log("DataService Error: "+n.responseJSON.Code+" - "+da.services.DataService.getErrorMessage(n));switch(n.responseJSON.Code){case"P00004":da.helpers.resetTimeout()}}else da.debug&&console.log("DataService.handleError Invalid Response or Error Code: "+JSON.stringify(n))};da.require("da.services");da.require("da.events");da.services.EventService=function(){this._errorPubSub=new da.events.PubSub("error");this._events={}};da.services.EventService.prototype={publishError:function(n){this._errorPubSub.publish(n)},subscribeError:function(n){this._errorPubSub.subscribe(n)},createEvent:function(n){return this._events[n]||(this._events[n]=new da.events.PubSub(n)),this._events[n]},subscribe:function(n,t){var i=this._events[n];i||(i=this._events[n]=new da.events.PubSub(n));i.subscribe(t)}},function(){da.provide("da.services.FileUploadService");da.services.FileUploadService=function(){var n=this;this.getFileUploadObj=function(n){return new Resumable(n)};this.fileAdded=function(n){n.removeClass("hide").find(".meter").css("width","0%");n.find(".percent").text("0%")};this.uploading=function(n,t){n.find(".meter").attr("style","width:"+t+"%");n.find(".percent").text(t+"%")};this.finish=function(n){n.addClass("hide").find(".meter").css("width","0%")}}}();da.require("da.services");da.provide("da.services.SessionService");da.services.SessionService=function(){var n=this;this._url=typeof da.IsAdmin=="undefined"||da.IsAdmin===!1?da.CheckSessionUrl:da.AdminCheckSessionUrl;this._logoutUrl=null;this._lastRun=null;this._logoutTimer=null;this._warningTimer=null;this._warningDisplayTime=null;this.eventService=null;da.injector.inject(this);this._sessionTimeoutWarning=this.eventService.createEvent("SessionTimeoutWarning");this.shouldReset=function(){var n=new Date;return n.getTime()-this._lastRun<3e4?!1:!0};this.isAlive=function(){return $.ajax({url:n._url,context:document.body,cache:!1,data:{isalive:"true"}})};this.logout=function(n){if(n.status===401){var t=n.getResponseHeader("LogoutUrl"),i=n.getResponseHeader("ErrorCode");i!=null?(da.debug&&console.log(t,i),window.location.href=t+"&ErrorCode="+i):window.location.href=t}else da.log("keepalive abort")};this.setLogoutTimer=function(n){var t=this;this._logoutTimer=setTimeout(function(){t.isAlive().done(function(){t.setLogoutTimer(1e4)}).fail(function(n){t.logout(n)})},n)};this.keepAlive=function(t){this._lastRun=(new Date).getTime();$.ajax({url:n._url,context:document.body,cache:!1,data:{init:this._logoutTimer==null?"true":"false"}}).done(function(i,r,u){var o=u.getResponseHeader("LogoutUrl"),f,s,e,h;n._logoutUrl=o?o:n._logoutUrl;f=u.getResponseHeader("Timeout");s=new Date;s.setMilliseconds(f);t&&(e=f-t*6e4,n._warningDisplayTime=e?e:n._warningDisplayTime);n._warningDisplayTime&&f!=null&&f!=""&&(typeof n._warningTimer=="undefined"||clearTimeout(n._warningTimer),n._warningTimer=setTimeout(function(){$(".session-timeout-warning").length>0&&($(".session-timeout-warning").slideDown(),da.helpers.scrollToScreenTop($(".session-timeout-warning"),function(){$(".session-timeout-warning").focus()}))},n._warningDisplayTime));f!=null&&f!=""&&(typeof n._logoutTimer=="undefined"||clearTimeout(n._logoutTimer),$(".session-timeout-warning").length>0&&$(".session-timeout-warning").slideUp(),h=f-5e3,setTimeout(function(){n._sessionTimeoutWarning.publish()},h),n.setLogoutTimer(f))}).fail(function(t){da.log("keepalive fail");n.logout(t)})}};da.services.SessionService.prototype={resetTimeout:function(){this.shouldReset()&&this.keepAlive()}};da.provide("da.ui.Accordion");da.require("da.services");da.ui.Accordion=function(n,t,i,r,u){function f(n,t,i,r,u,f){if(n.closest(".da-accord").find(".da-accord-menu").data("show-tab")!=t&&(i.hide().slideDown(500),r.attr("class","icon-cross"),f&&f(i.closest(".da-accord").find(".da-accord-menu"))),$("#mobile-holder").css("display")=="none"){$(u).hasClass("da-accord-menu")||(u=$(u).closest(".da-accord").find(".da-accord-menu"),u&&(u=u.get(0)));var e=u.hash,o=$(e);$("html,body").animate({scrollTop:o.offset().top},900,"swing",function(){window.location.hash=e})}}var e=this;this.hideAll=function(){var t=$(document).find(".da-accord-content"),n;$.each(t,function(n){$(t[n]).hide()});n=$(document).find(".da-accord-menu");$.each(n,function(t){var i=$(n[t]).find(".elipses-col").find("i");i.attr("class","icon-more-elipses");u&&u($(n[t]).closest(".da-accord").find(".da-accord-menu"))})};n.click(function(n){var a=this,o,e,l;n.preventDefault();o=$(this).data("show-tab");e=-1;e=o===undefined||o===null?parseInt($(this).closest(".btn-row").data("show-tab")):parseInt(o);var p=parseInt($(".da-accord-content:visible").closest(".da-accord").find(".da-accord-menu").data("show-tab")),h=$(this).closest(".da-accord").find(".da-accord-content"),v=h.is(":visible");if(!t||t(a,p,e,v)){var y=$(".da-accord-menu[data-show-tab="+e+"]").closest(".da-accord").find(".da-accord-content"),s=$(".da-accord-menu[data-show-tab="+e+"]").find(".elipses-col").find("i"),c=$(".da-accord-menu[data-show-tab="+e+"]");i?v?h.slideUp(500,function(){s.attr("class","icon-more-elipses");u&&u(c)}):h.slideDown(500,function(){s.attr("class","icon-cross");r&&r(c)}):(l=!1,$(this).closest(".da-accord").siblings(".da-accord").addBack().find(".elipses-col").find("i").attr("class","icon-more-elipses"),u&&u($(".elipses-col").closest(".da-accord").find(".da-accord-menu")),$(this).closest(".da-accord").siblings(".da-accord").addBack().find(".da-accord-content").each(function(){$(this).is(":visible")&&(l=!0,$(this).slideUp(500,function(){f($(this),e,y,s,a,r)}))}),l||(y.hide().slideDown(500),s.attr("class","icon-cross"),r&&r(c)))}})};da.provide("da.ui.AjaxSelect");da.require("da.services");da.ui.AjaxSelect=function(n){this._url=n.url;this._isAdmin=n.isAdmin;this._postMethod=n.postMethod;this._selector=n.selector;this._value=n.value;this._text=n.text;this._array=n.array;this._select$=$(this._selector);this.dataService=null;this._data=[];da.injector.inject(this);this.addOption=function(n,t,i){this._select$.append("<option value='"+n+"'"+(i?"selected":"")+">"+t+"<\/option>")};this.getValue=function(n){return this._value?n[this._value]:n};this.getText=function(n){return this._text?n[this._text]:n}};da.ui.AjaxSelect.prototype={load:function(n,t){var i=this;this._data.length>0||this.dataService.load(this._url,n,this._postMethod,!0,this._isAdmin?"/adminplatform.axd":undefined).done(function(n){var r,u;for(i._data=i._array?n[i._array]:i._array,r=0;r<i._data.length;r++)u=i._data[r],i.addOption(i.getValue(u),i.getText(u),t)}).fail(function(){}).always(function(){})}};da.provide("da.ui");da.ui.mobiScrollTop=function(n,t){if(matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.large).matches)if(t=t==undefined?!1:!0,n){da.log("show if 1");var i=t?$(n).offset().top+$(n).height():$(n).offset().top;$("html, body").animate({scrollTop:i},"slow")}else da.log("show if 2"),$("html, body").animate({scrollTop:0},"slow")};da.ui.toggleElementOnCheckboxChanged=function(n,t,i){n.checked?i&&i.toggleDisplay?i.toggleDisplay(t):$(t).slideDown():i&&i.toggleHide?i.toggleHide(t):$(t).slideUp()};da.ui.disableElementOnCheckboxChanged=function(n,t){da.ui.toggleElementOnCheckboxChanged(n,t,{toggleDisplay:function(n){$(n).prop("disabled",!1)},toggleHide:function(n){$(n).prop("disabled",!0)}})};da.ui.disableElement=function(){for(var n=0;n<arguments.length;n++)$(arguments[n]).prop("disabled",!0)};da.ui.enableElement=function(){for(var n=0;n<arguments.length;n++)$(arguments[n]).prop("disabled",!1),$(arguments[n]).removeClass("disabled")};currentWindowWidth=$(window).width(),function(){function i(){if($(window).width()!=currentWindowWidth){currentWindowWidth=$(window).width();var n=$(".exit-off-canvas");n&&$(n).click()}}function t(){n&&window.clearTimeout(n);n=window.setTimeout(function(){var n=$(document.activeElement);n.is(".hasDatepicker")&&n.datepicker("hide").datepicker("show")},100)}var n;$(function(){$(".da-tooltip-open").click(function(){$(this).toggleClass("open");var n=$(this).attr("data-da-tooltip");$(".da-tooltip[data-da-tooltip='"+n+"']").toggle()});$(".da-tooltip").click(function(){$(this).toggle();var n=$(this).attr("data-da-tooltip");$(".da-tooltip-open[data-da-tooltip='"+n+"']").toggleClass("open")});$(".disableOnClick").click(function(n){var t=$(this);da.helpers.isStringNullOrEmpty(t.attr("name"))||t.after("<input type='hidden' name='"+t.attr("name")+"' />");n.preventDefault();t.closest("form").submit();t.attr("disabled","disabled");t.hasClass("disabled")||t.addClass("disabled")});$(".disableOnClientClick").click(function(n){n.preventDefault();var i=$(this),t=i.closest("form");t&&t.validate()&&t.validate().checkForm()&&i.attr("disabled","disabled")});$(window).resize(function(){i();t()});$(window).scroll(function(){t()});$("input[readonly]").attr("tabindex","-1");$("label.checkbox").keydown(function(n){n.which===32&&$(this).siblings("input[type='checkbox']").click()});var n=$("nav li"),r=$("nav li > a"),u=$(".click-space"),f=$(".remove-outline"),e=$(".print-accessible"),o=$("button"),s=$("a"),h=$(".terms-text");da.helpers.removeOutlineOnClick(n);da.helpers.removeOutlineOnClick(r);da.helpers.removeOutlineOnClick(u);da.helpers.removeOutlineOnClick(f);da.helpers.removeOutlineOnClick(o);da.helpers.removeOutlineOnClick(e);da.helpers.removeOutlineOnClick(s);da.helpers.removeOutlineOnClick(h);$(".number").keydown(function(n){return n.which==46||n.which==8||n.which<=40&&n.which>=35||n.which==9?!0:n.which>=48&&n.which<=57&&!n.shiftKey||n.which>=96&&n.which<=105&&!n.shiftKey?!0:(n.ctrlKey||n.metaKey)&&(n.code===86||n.code===67||n.code==118||n.code===99)?!0:(n.preventDefault(),!1)});$(".print-accessible").keydown(function(n){(n.which==32||n.which==13)&&(n.preventDefault(),window.open("?print=1"))});$(".print-accessible").click(function(){window.open("?print=1")})})}();da.provide("da.ui.DatePicker");da.require("da.services");da.ui.DatePicker=function(n){var t=this,r,i,u,f;this._elem$=$(n);this._elem$.attr("type","text");this._iconElement$=null;this.eventService=null;da.injector.inject(this);this.resetDate=this.eventService.createEvent("ResetDate");r=this._elem$.val();i="dd/mm/yy";r&&(this._elem$.attr("name")=="apFromDate"||this._elem$.attr("name")=="apToDate"?(this._elem$.val(moment(this._elem$.val()).format("DD/MM/YY")),i="dd/mm/y"):this._elem$.val(moment(this._elem$.val()).format("DD/MM/YYYY")));this._elem$.closest(".form-element").each(function(n,i){var r=$(i).find(".icon-scheduled");r.length>0&&(t._iconElement$=r)});this._iconElement$&&this._iconElement$.click(function(){t._elem$.focus()});da.helpers.isWindowsPhone()||(u=t._elem$.attr("showMonth")!=undefined&&$(n).attr("showMonth")=="true",f=t._elem$.attr("showYear")!=undefined&&$(n).attr("showYear")=="true",this._elem$.addClass("datePicker").datepicker({changeMonth:u,changeYear:f,dateFormat:i,minDate:t._elem$.attr("data-minDate"),maxDate:t._elem$.attr("data-maxDate"),yearRange:t._elem$.attr("year-range"),onSelect:function(){var i,n,r;if($(this).change(),i=$(this),i.valid(),i.trigger("checkval"),t.resetDate.publish(),n=i.attr("id"),r="minDate",n.indexOf("From")>=0)n=n.replace("From","To");else if(n.indexOf("Begin")>=0)n=n.replace("Begin","End");else if(n.indexOf("To")>=0)n=n.replace("To","From"),r="maxDate";else if(n.indexOf("End")>=0)n=n.replace("End","Begin"),r="maxDate";else return!1;$("#"+n).datepicker("option",r,i.datepicker("getDate"))},onClose:function(){$(this).trigger("dateupdated")}}))};da.onInit(function(){Modernizr.touch&&Modernizr.inputtypes.date?($("input[type=date]").change(function(){var n=$(this).attr("id"),t="min";if(n.indexOf("From")>=0)n=n.replace("From","To");else if(n.indexOf("Begin")>=0)n=n.replace("Begin","End");else if(n.indexOf("To")>=0)n=n.replace("To","From"),t="max";else if(n.indexOf("End")>=0)n=n.replace("End","Begin"),t="max";else return!1;$("#"+n).attr(t,$(this).val())}),$("input[type=date]").each(function(){var t=$(this),i=t.closest(".form-element"),n;i.length>0&&(n=i.find(".icon-scheduled"),n.length>0&&n.click(function(){t.focus()}))})):$("input[type=date]").each(function(n,t){new da.ui.DatePicker(t)});$("input[name='BeginDate']").keyup(function(){if($(this).val()==""){var n=$("input[class*='calendar']");n.each(function(){$.datepicker._clearDate(this)})}})});da.ui.DialogHandler=function(n,t){this.dialogStore=$(n);this.currentDialog=null;this.lockHandler=t;this.dialogs={}};da.ui.DialogHandler.prototype={openInline:function(n,t,i){return this.lockHandler&&this.lockHandler()?!1:(this.currentDialog&&this.closeAll(),this.currentDialog=$(n),t?t(currentDialog):i?this.currentDialog.show():this.currentDialog.slideDown(),this.dialogs[n]=this.currentDialog,Modernizr.touch||this.currentDialog.find(".focusonme").focus(),!0)},open:function(n,t,i,r,u){return this.lockHandler&&this.lockHandler()&&!u?!1:(this.currentDialog&&this.closeAll(!r,null,u),this.currentDialog=$(this.dialogStore).find(t),i?i(n,this.currentDialog):$(n).append(this.currentDialog),r?this.currentDialog.show():this.currentDialog.slideDown(),this.dialogs[t]=this.currentDialog,Modernizr.touch||this.currentDialog.find(".focusonme").focus(),!0)},closeAll:function(n,t,i){var r=this,u,f;return this.lockHandler&&this.lockHandler()&&!i?!1:(u=!n,this.currentDialog&&(u?(this.currentDialog.hide(),this.currentDialog.appendTo(r.dialogStore)):(f=r.currentDialog,this.currentDialog.slideUp(function(){t&&t();f.appendTo(r.dialogStore)}))),this.currentDialog=null,!0)}};da.ui.Dialog=function(n){this.dialogId=n;this.dialogHandler=dialogHandler;this.slideDown=!0;this.openInline=!1;this.toggle=!1};da.provide("da.ui.ErrorWidget");da.ui.ErrorWidget=function(){this._root$=$("#Modal");this._root$.addClass("error-modal");this._heading$=this._root$.find("h2").first();this._lead$=this._root$.find("p.lead").first();this._content$=this._root$.find("p.content").first();$(document).on("close","[data-reveal]",function(){da.ui.ErrorWidget.isShown=!1})};da.ui.ErrorWidget.prototype={show:function(){da.editMode||da.ui.ErrorWidget.isShown||(this._heading$.text(da.helpers.htmlDecode(da.global("ErrorTitle"))),this._lead$.text(da.helpers.htmlDecode(da.global("ErrorSubject"))),this._content$.text(da.helpers.htmlDecode(da.global("ErrorContent"))),this._root$.foundation("reveal","open"),da.ui.ErrorWidget.isShown=!0)},hide:function(){da.ui.ErrorWidget.isShown=!1;this._root$.foundation("reveal","close")}};da.ui.ErrorWidget.isShown=!1;da.ui.ExportBarWidget=function(n,t,i){var o,s;n?$("#transaction-export").hide():$("#transaction-export").show();var r=0,u=$(window).height(),f=t.position().top,e=f+t[0].clientHeight+r+i.height();e-=$(document).scrollTop();o=$(document).scrollTop()+u<f+r+i.height()+140;this.exportBarOnScreen=u>=e||o;this.exportBarSticky=i.hasClass("sticky-footer-bar");(this.exportBarOnScreen&&this.exportBarSticky||!this.exportBarOnScreen&&!this.exportBarSticky)&&(s=t.width(),i.width(s),i.toggleClass("sticky-footer-bar"),i.removeClass("export-mobile-menu"))};da.provide("da.ui.LoadingWidget");da.provide("da.ui.CustomLoadingWidget");da.provide("da.ui.LoadingWidgetMessage");da.ui.LoadingWidget=function(n){this._htmlString="<div class='loading'><div class='spinner-container'><div class='spinner'><span class='icon-radio-unchecked'><\/span><span class='icon-radio-unchecked'><\/span><\/div><\/div><\/div>";this._$parent=$(n).first()};da.ui.CustomLoadingWidget=function(n,t,i){t=t==""?"1rem":t;i=i==""?"0.5rem":i;this._htmlString="<div class='loading loading-custom' style='width: "+t+"; height: "+t+";'><div class='spinner-container'><div class='spinner' style='width: "+t+"; height: "+t+";'><span class='icon-radio-unchecked' style='font-size: "+t+"; height: "+t+"; width: "+i+";'><\/span><span class='icon-radio-unchecked' style='font-size: "+t+"; height: "+t+"; width: "+i+";'><\/span><\/div><\/div><\/div>";this._$parent=$(n).first()};da.ui.LoadingWidgetMessage=function(n,t,i){t=t==""?"5rem":t;this._messageHtml=i==""?"":"<p class='text-center' style='margin-top: 1rem;'>"+i+"<\/p>";this._htmlString="<div class='loading' style='height:"+t+"'><div class='spinner-container text-center'><div class='spinner' style='margin: 0 auto; width: 4rem; height: 4rem;'><span class='icon-radio-unchecked' style='height: 4rem; width: 2rem; font-size: 4rem;'><\/span><span class='icon-radio-unchecked' style='height: 4rem; width: 2rem; font-size: 4rem;'><\/span><\/div>"+this._messageHtml+"<\/div><\/div>";this._$parent=$(n).first()};da.ui.LoadingWidget.prototype={show:function(){this._$parent.children().hide();this._$parent.prepend(this._htmlString);this._$parent.children().first().prop("clientHeight");this._$parent.find(".loading").height()},hide:function(){this._$parent.children(".loading").remove();this._$parent.children().show()}};da.ui.CustomLoadingWidget.prototype={show:function(){this._$parent.children().hide();this._$parent.prepend(this._htmlString);this._$parent.children().first().prop("clientHeight");this._$parent.find(".loading").height()},hide:function(){this._$parent.children(".loading").remove();this._$parent.children().show()}};da.ui.LoadingWidgetMessage.prototype={show:function(){this._$parent.children().hide();this._$parent.prepend(this._htmlString);this._$parent.children().first().prop("clientHeight");this._$parent.find(".loading").height()},hide:function(){this._$parent.children(".loading").remove();this._$parent.children().show()}};da.provide("da.ui.MemberAddress");da.ui.MemberAddress=function(n){var t="";return n.CareOfDetails&&(t+=n.CareOfDetails+" "),n.FormatCode=="AUS"?(n.PropertyName&&(t+=n.PropertyName+" "),n.PoBoxOrFlatType&&(t+=n.PoBoxOrFlatType+" "),n.PoBoxOrFlatNumber&&(t+=n.PoBoxOrFlatNumber+" "),n.StreetNumber&&(t+=n.StreetNumber+" "),n.StreetName&&(t+=n.StreetName+" "),n.StreetTypeDescription&&(t+=n.StreetTypeDescription+" "),n.Suburb&&(t+=n.Suburb+" ")):(n.AddressLine1&&(t+=n.AddressLine1+" "),n.AddressLine2&&(t+=n.AddressLine2+" "),n.AddressLine3&&(t+=n.AddressLine3+" ")),n.PostalCode&&(t+=n.PostalCode+" "),n.State&&(t+=n.State),t};da.ui.OpeningSectionWidget=function(n,t,i){var r=this,e=".openable-item",f=".opening-area",o=".confirmation-dialog",h=".more-icon",c=".less-icon",s,u;this.isLocked=function(){return s};this.setLocked=function(n){s=n};u=$(n);u.off("click");u.on("click",function(){var s=$(this),n,u;if(r.isLocked()){da.helpers.scrollToOpenDialog(o,f,!0);return}n=s.closest(e);u=n.find(f);u.is(":visible")?u.slideUp(function(){i&&i(s);r.swapMoreIcons(n)}):(r.closeItems(),t&&t(s),u.slideDown(function(){r.swapMoreIcons(n);da.helpers.scrollToOpenDialog(o,f)}))});u.off("keydown");u.on("keydown",function(n){da.helpers.clickOnSpaceOrEnterAndFocus(n,this,this)});this.closeItems=function(){$(f+":visible").each(function(n,t){var u=$(t),f=u.closest(e);u.slideUp(function(){i&&i(u);r.swapMoreIcons(f)})})};this.swapMoreIcons=function(n){n.find(h).toggle();n.find(c).toggle()}};da.provide("da.ui.Pagination");da.ui.Pagination=function(n){var t=this;this.pageIndex=0;this.totalPages=1;this._enablePageInput=!1;n&&(this._enablePageInput=n.enablePageInput,this._beforeLoadHandler=n.beforeLoad?n.beforeLoad:null);this.loadHandler=null;this.setPageIndexAndLoad=function(n){t.setPageIndexWithLoader(n,function(){t.loadHandler(t.pageIndex)})};this.setPageIndexWithLoader=function(n,i){typeof n!="undefined"&&t.setCurrentPage(n);t.callBeforeLoad();i()};this.setTotalPages=function(n){t.totalPages=parseInt(n);t.updatePageCounter()};this.setLoadHandler=function(n){t.loadHandler=n};this.setCurrentPage=function(n){t.pageIndex=parseInt(n)};this.isLastPage=function(){return t.pageIndex>=t.totalPages-1};this.callBeforeLoad=function(){this._beforeLoadHandler&&this._beforeLoadHandler()};$("#page-back").click(function(){t.pageIndex!=0&&($("#pagination-area").hide(),t.pageIndex--,t.callBeforeLoad(),t.loadHandler(t.pageIndex))});$("#page-forward").click(function(){t.pageIndex<t.totalPages-1&&($("#pagination-area").hide(),t.pageIndex++,t.callBeforeLoad(),t.loadHandler(t.pageIndex))});$("#cpage-first").click(function(){$("#pagination-area-more").hide();t.pageIndex=0;t.callBeforeLoad();t.loadHandler(t.pageIndex)});$("#cpage-back").click(function(){t.pageIndex!=0&&($("#pagination-area-more").hide(),t.pageIndex--,t.callBeforeLoad(),t.loadHandler(t.pageIndex))});$("#cpage-forward").click(function(){t.pageIndex<t.totalPages-1&&($("#pagination-area-more").hide(),t.pageIndex++,t.callBeforeLoad(),t.loadHandler(t.pageIndex))});$("#cpage-last").click(function(){$("#pagination-area-more").hide();t.pageIndex=t.totalPages-1;t.callBeforeLoad();t.loadHandler(t.pageIndex)});$("#cpage").keypress(function(n){if(n.keyCode==13&&$(this).val().replace(/\s+/g,"")!==""){$("#pagination-area-more").hide();var i=parseInt($(this).val())-1;i<=0?i=0:i>=t.totalPages&&(i=t.totalPages-1);t.pageIndex=i;t.callBeforeLoad();t.loadHandler(t.pageIndex)}});this.updatePageCounter=function(){t._enablePageInput?t.totalPages<=1?$("#pagination-area-more").hide():($("#pagination-area-more").show(),t.pageIndex<=0?t.showPageArrows(!1,!1,!0,!0):t.isLastPage()?t.showPageArrows(!0,!0,!1,!1):t.showPageArrows(!0,!0,!0,!0),$("#cpage").val(t.pageIndex+1),$("#total-pages").text(t.totalPages)):t.totalPages<=1?$("#pagination-area").hide():($("#pagination-area").show(),t.pageIndex<=0?t.showPageArrows(!0,!1):t.isLastPage()?t.showPageArrows(!1,!0):t.showPageArrows(!0,!0),$("#current-page").text("Page "+(t.pageIndex+1)+" of "+t.totalPages))};this.showPageArrows=function(n,t){n?$("#page-forward").show():$("#page-forward").hide();t?$("#page-back").show():$("#page-back").hide()};this.showPageArrows=function(n,t,i,r){n?$("#cpage-first").show():$("#cpage-first").hide();t?$("#cpage-back").show():$("#cpage-back").hide();i?$("#cpage-forward").show():$("#cpage-forward").hide();r?$("#cpage-last").show():$("#cpage-last").hide()}};da.provide("da.ui.PasswordStrength");da.require("da.services");da.ui.PasswordStrength=function(n,t){$(n).keypress(function(){$(this).complexify({},function(n,i){var r=$(t);r.css({width:i+"%"});i>0&&i<25?(r.removeClass("medium strong").addClass("weak"),r.find(".strength-text").text("weak")):i>=25&&i<65?(r.removeClass("weak strong").addClass("medium"),r.find(".strength-text").text("medium")):i>=65?(r.removeClass("weak medium").addClass("strong"),r.find(".strength-text").text("strong")):r.find(".strength-text").text("")})})};da.provide("da.ui.QasWidget");da.require("da.services");da.ui.QasWidget=function(n,t,i,r,u,f){var e=this,o,h,s;this.dataService=null;this.eventService=null;this._boxPlaceholder=null;this._flatPlacholder=null;da.injector.inject(this);this.isMailing=n;o={FlatUnitType:{Label:"Flat/Unit Type",Id:3,Value:""},FlatUnitNo:{Label:"Flat/Unit No",Id:4,Value:""},BuildingNo:{Label:"Number",Id:12,Value:""},StreetName:{Label:"Street Name",Id:17,Value:""},StreetType:{Label:"Street type",Id:18,Value:""},Locality:{Label:"Locality",Id:20,Value:""},StateName:{Label:"State",Id:23,Value:""},PostalCode:{Label:"Postcode",Id:25,Value:""},CountryName:{Label:"Country Name",Id:29,Value:""},CountryCode3L:{Label:"Country Code (3L)",Id:31,Value:""},Postal:{Label:"Postal delivery types",Id:13,Value:""},PostalDeliveryType:{Label:"Postal delivery type",Id:14,Value:""},PostalDeliveryNo:{Label:"Postal delivery no",Id:15,Value:""},BuildingLevel:{Label:"Building Level",Id:5,Value:""},BuildingLevelType:{Label:"Building level type",Id:6,Value:""},BuildingLevelNo:{Label:"Building level number",Id:7,Value:""},Allotment:{Label:"Allotment",Id:8,Value:""},AllotmentLot:{Label:"Allotment Lot",Id:9,Value:""},AllotmentNo:{Label:"Allotment number",Id:10,Value:""}};this.qasSelectedEvent=this.eventService.createEvent("QasSelected");this.qasStringEvent=this.eventService.createEvent("QasAddr");this.isResQasSelected=!1;this.isMailingQasSelected=!1;this.isOriginal=!1;this.serviceFailed=!1;t>1&&(e.isResQasSelected=!0,e.isMailingQasSelected=!0);e.dataService.sharedServiceLoad("memberdetails/GetAddressLookupData","GET").done(function(n){var r,i,t;if(n)for(r=$("#ddlCountries"),$('#ddlCountries option[value!=""]').remove(),i="",t=0;t<n.Countries.length;t++)i=n.Countries[t].Id=="AUS"?"selected":"",r.append('<option value="'+n.Countries[t].Id+'" '+i+">"+da.helpers.htmlDecodeText(n.Countries[t].Name)+"<\/option>")});h=e.dataService.getData("configuration");s=[];this.setInvalidResidentialFlatTypes=function(){e.dataService.sharedServiceLoad("address/FlatBoxTypes","GET").done(function(n){n&&(s=n.FlatBoxTypes.filter(function(n){return n.InvalidForResidential===!0}))})};h.ObValidResidentialAddressEnabled&&this.setInvalidResidentialFlatTypes();$("#ResidentialAddress1").focus(function(){e.isMailing=!1;i&&(e.isOriginal=!0,$(this).parent().append($(".qas-address-dialog").slideDown(function(){e.prepareQasFallbackForm();u&&u()})))});$("#MailingAddress1").focus(function(){e.isMailing=!0;i&&(e.isOriginal=!0,$(this).parent().append($(".qas-address-dialog").slideDown(function(){e.prepareQasFallbackForm();u&&u()})))});$("#ddlAddressTypes").change(function(){$(this).closest("form").validate().resetForm();this.value=="Yes"?($(".flat-type").hide(),$(".box-type").show(),$(".box-type").prop("autocomplete","new-box-type"),$(".box").show(),$(".flat-number").hide(),$(".street-number").hide(),$(".street-name").hide(),$(".street-type").hide()):($(".box-type").hide(),$(".box").hide(),$(".flat-type").show(),$(".flat-type").prop("autocomplete","new-flat-type"),$(".flat-number").show(),$(".street-number").show(),$(".street-name").show(),$(".street-type").show())});i||$(".qas-address").each(function(){var t=$(this),r,i;$(this).autocomplete({delay:1e3,minLength:8,autoFocus:!1,source:function(u,o){$(".qas-address-dialog").slideUp(function(){f&&f()});t.addClass("busy");e.dataService.sharedServiceLoad("address/search",{PartialAddress:t.val()},"POST",!0).done(function(t){var s,u,f;for($(".ui-helper-hidden-accessible").hide(),s=[],u=0;u<t.Items.length;u++){var h=!0,l=e.dataService.getData("configuration"),c=[];if(!n&&l.ObValidResidentialAddressEnabled)for(f=0;f<c.length;f++)if(t.Items[u].Value.indexOf(c[f].FlatOrBoxType)===0){h=!1;break}h&&s.push({label:t.Items[u].Value,moniker:t.Items[u].Moniker,value:t.Items[u].Value})}o(s);r=t.FullMoniker;i=t.Items}).fail(function(){e.serviceFailed=!0;e.isOriginal=!0;$(".qas-address-dialog").slideUp(function(){f&&f()});e.qasStringEvent.publish(e.getQasEventParams("",""));e.openQasDialog(t)}).always(function(){t.removeClass("busy")})},select:function(n,r){e.publishQasEvent(!0);e.dataService.sharedServiceLoad("address/format",{Moniker:r.item.moniker},"POST",!0).done(function(n){var u,o;for(e.isOriginal=!1,u=0;u<i.length;u++)i[u].Label==r.item.label&&i[u].OriginalAddress==!0&&(e.openQasDialog(t),e.isOriginal=!0,e.publishQasEvent(!1));e.isOriginal||($(".qas-address-dialog").slideUp(function(){f&&f()}),n.AddressLines=e.mapQasToManual(n.AddressLines),o=e.handleQas(n),e.qasStringEvent.publish(e.getQasEventParams(o,"")))}).fail(function(){e.isOriginal=!0;e.openQasDialog(t)})}});$(this).keyup(function(n){n.keyCode!=9&&(e.isResQasSelected||e.isMailingQasSelected)&&e.publishQasEvent(!1)})});this.mapQasToManual=function(n){function i(n){var i=[],r=t.map(function(n){return n.qasLabel}),u=["BuildingLevel","Allotment"].map(function(n){return n.toLowerCase()});return n.forEach(function(n){var e=r.indexOf(n.Label),f,o;e>=0&&n.Value!==""?(f=t[e],n.Value==="suite"&&(n.Value="Suite"),o={Label:f.manualLabel,Value:n.Value,Type:f.manualType},i.push(o)):n.Value!==""&&u.indexOf(n.Label.toLowerCase())<0&&i.push(n)}),i}var t=[{qasLabel:"BuildingLevelType",manualLabel:"Flat/Unit Type",manualType:3},{qasLabel:"BuildingLevelNo",manualLabel:"Flat/Unit No",manualType:4},{qasLabel:"BuildingName2",manualLabel:"Flat/Unit Type",manualType:3},{qasLabel:"BuildingNo",manualLabel:"Number",manualType:12},{qasLabel:"AllotmentLot",manualLabel:"Flat/Unit Type",manualType:3},{qasLabel:"AllotmentNo",manualLabel:"Number",manualType:12}];return i(n)};this.originalFlatOptions;this.originalFlatOptions||(this.originalFlatOptions=$("#ddlFlatTypes option"));this.openQasDialog=function(n){var i,t;if($(".qas-address-dialog .alert").hide(),e.prepareQasFallbackForm(),n.parent().append($(".qas-address-dialog").slideDown(function(){u&&u()})),i=e.dataService.getData("configuration"),i.ObValidResidentialAddressEnabled){var f=s.map(function(n){return n.FlatOrBoxType.toLowerCase()}),o=$("#ResidentialAddressContainer #ddlFlatTypes"),r,h=$("#ddlFlatTypes option");r=o.length>0?this.originalFlatOptions.filter(function(){return f.indexOf($(this).val().toLowerCase())<0}):this.originalFlatOptions;t=$("#ddlFlatTypes");h.remove();$.each(r,function(){t.append($(this)[0])});t.val("")}};this.prepareQasFallbackForm=function(){e._boxPlaceholder&&e._boxPlaceholder.length>0&&$("#txtBox").attr("placeholder",e._boxPlaceholder);e._flatPlacholder&&e._flatPlacholder.length>0&&$("#txtFlatNumber").attr("placeholder",e._flatPlacholder);e.isMailing?($("#ddlAddressTypes").val("Yes"),$(".address-type").show(),$(".box-type").show(),$(".box-type").prop("autocomplete","new-box-type"),$(".box").show(),$(".flat-number").hide(),$(".street-number").hide(),$(".street-name").hide(),$(".street-type").hide(),$(".flat-type").hide()):($(".address-type").hide(),$(".box-type").hide(),$(".flat-type").show(),$(".flat-type").prop("autocomplete","new-flat-type"),$(".box").hide(),$(".flat-number").show(),$(".street-number").show(),$(".street-name").show(),$(".street-type").show());$("#ddlFlatTypes").val("");$("#ddlBoxTypes").val("");$("#txtFlatNumber").val("");$("#txtBox").val("");$("#txtStreetNumber").val("");$("#txtStreetName").val("");$("#txtStreetType").val("");$("#txtSuburb").val("");$("#txtPostcode").val("");$("#ddlStates").val("")};this.publishQasEvent=function(n){e.isMailing?e.isMailingQasSelected=n:e.isResQasSelected=n;var t={isMailingAddr:e.isMailing,isQasAddrSelected:n};e.qasSelectedEvent.publish(t)};this.handleQas=function(n){for(var i=[],t=0;t<n.AddressLines.length;t++)i.push(n.AddressLines[t]);return JSON.stringify(i)};this.createLine=function(n,t){return{Label:t.Label,Type:t.Id,Value:n}};this.saveModel=function(){var n=[],t;return n.push(e.createLine($("#txtStreetNumber").val(),o.BuildingNo)),n.push(e.createLine($("#txtStreetName").val(),o.StreetName)),n.push(e.createLine($("#txtStreetType").val(),o.StreetType)),n.push(e.createLine($("#txtSuburb").val(),o.Locality)),n.push(e.createLine($("#ddlStates").val(),o.StateName)),n.push(e.createLine($("#txtPostcode").val(),o.PostalCode)),n.push(e.createLine($("#ddlCountries").val(),o.CountryCode3L)),n.push(e.createLine($("#ddlCountries option:selected").text(),o.CountryName)),t=$("#ddlBoxTypes").val(),da.helpers.isStringNullOrEmpty(t)||n.push(e.createLine(t,o.PostalDeliveryType)),t=$("#ddlFlatTypes").val(),da.helpers.isStringNullOrEmpty(t)||n.push(e.createLine(t,o.FlatUnitType)),t=$("#txtFlatNumber").val(),da.helpers.isStringNullOrEmpty(t)||n.push(e.createLine($("#txtFlatNumber").val(),o.FlatUnitNo)),e.isMailing&&n.push(e.createLine($("#txtBox").val(),o.PostalDeliveryNo)),n};this.setAddr=function(){var n={AddressLines:e.saveModel(),IsFormatted:!0,International:$("#ddlCountries").val()!="AUS"};return JSON.stringify(e.saveModel())};this.validateBoxType=function(){return $("#ddlBoxTypes").val()!=""};this.validateState=function(){if($("#ddlStates").val()!=""){var n=e.validatePostcode();return n&&e.ClearValidation("txtPostcode"),n}return!0};this.validateFlatUnitNumberExists=function(){var n=$("#txtFlatNumber").val(),t=$("#ddlFlatTypes").val();return n.length>0&&t==""?!1:!0};this.validFlatUnit=function(){var n=$("#txtFlatNumber").val(),t=$("#ddlFlatTypes").val();return!(n.length==0&&t!="")};this.validatePostcode=function(){var n=$("#txtPostcode").val(),t;return $("#ddlCountries").val()=="AUS"&&!isNaN(n)&&(parseFloat(n)||0)===parseFloat(n)&&n.length==4?$("#ddlStates").val()!=""?(t=e.ValidatePC(n),t&&e.ClearValidation("ddlStates"),t):!0:$("#ddlCountries").val()!="AUS"};this.validateResidentialStreetType=function(){var i=e.dataService.getData("configuration"),t,n;return i.ObValidResidentialAddressEnabled?(t=function(n){var t=!0;return n.some(function(n){var i=s.filter(function(t){return t.FlatOrBoxType.toLowerCase()===n.Value.toLowerCase()&&n.Value!==""});return i.length>0&&(t=!1),t===!1}),t},n=$("#residentialAddr"),n.length===0||!n[0].value)?!1:(n=JSON.parse($("#residentialAddr")[0].value),t(n)):!0};this.ClearValidation=function(n){var t=$("#"+n).attr("class");t&&t.indexOf("error")>=0&&($("#"+n).removeClass("error"),$("#"+n).addClass("valid"),$("#"+n).valid())};this.ValidatePC=function(n){var t=parseFloat(n),i=!1,r=e.isMailing&&$("#ddlAddressTypes option:selected").val().toLowerCase()==="yes"&&$("#ddlBoxTypes").length>0&&$("#ddlBoxTypes").val().length>0;switch($("#ddlStates").val().toUpperCase()){case"ACT":i=r?t>=2600&&t<=2618||t>=2900&&t<=2920||t>=200&&t<=299:t>=2600&&t<=2618||t>=2900&&t<=2920;break;case"NSW":i=r?t>=2e3&&t<=2599||t>=2619&&t<=2899||t>=2921&&t<=2999||t>=1e3&&t<=1999:t>=2e3&&t<=2599||t>=2619&&t<=2899||t>=2921&&t<=2999;break;case"NT":i=r?t>=800&&t<=899||t>=900&&t<=999:t>=800&&t<=899;break;case"QLD":i=r?t>=4e3&&t<=4999||t>=9e3&&t<=9999:t>=4e3&&t<=4999;break;case"SA":i=r?t>=5e3&&t<=5799||t>=5800&&t<=5999:t>=5e3&&t<=5799;break;case"TAS":i=r?t>=7e3&&t<=7799||t>=7800&&t<=7999:t>=7e3&&t<=7799;break;case"VIC":i=r?t>=3e3&&t<=3999||t>=8e3&&t<=8999:t>=3e3&&t<=3999;break;case"WA":i=r?t>=6e3&&t<=6799||t>=6837&&t<=6848||t>=6800&&t<=6999:t>=6e3&&t<=6799}return i};$("#addrCancel").click(function(n){n.preventDefault();$(".qas-address-dialog").slideUp(function(){e.publishQasEvent(!1);f&&f();$("#ResidentialAddress1").focus()});da.helpers.doScroll($("#ResidentialAddress1"))});$("#ddlCountries").change(function(){this.value!=="AUS"?($(".qas-state").hide(),$("#ddlStates").val("")):$(".qas-state").show()});$("#ddlBoxTypes").change(function(){var n=this.value!=="";n?(e._flatPlacholder==null&&(e._boxPlaceholder=$("#txtBox").attr("placeholder")),$("#txtBox").attr("placeholder",""),$("#txtBox").attr("required","required")):($("#txtBox").attr("placeholder",e._boxPlaceholder),$("#txtBox").removeAttr("required"))});$("#ddlFlatTypes").change(function(){var n=this.value!=="";n?(e._flatPlacholder==null&&(e._flatPlacholder=$("#txtFlatNumber").attr("placeholder")),$("#txtFlatNumber").attr("placeholder","")):$("#txtFlatNumber").attr("placeholder",e._flatPlacholder)});this.qasFormIsValid=function(n){var i=n.validate(),t=!0;return $("#ddlBoxTypes").is(":hidden")||(t=i.element("#ddlBoxTypes")),$("#txtBox").is(":hidden")||(t=i.element("#txtBox")&&t),$("#ddlFlatTypes").is(":hidden")||(t=i.element("#ddlFlatTypes")&&t),$("#txtFlatNumber").is(":hidden")||(t=i.element("#txtFlatNumber")&&t),$("#txtStreetNumber").is(":hidden")||(t=i.element("#txtStreetNumber")&&t),$("#txtStreetName").is(":hidden")||(t=i.element("#txtStreetName")&&t),$("#txtStreetType").is(":hidden")||(t=i.element("#txtStreetType")&&t),$("#txtSuburb").is(":hidden")||(t=i.element("#txtSuburb")&&t),$("#txtPostcode").is(":hidden")||(t=i.element("#txtPostcode")&&t),i.element("#ddlStates")&&t};$("#addrOk").click(function(){if(e.qasFormIsValid($(this).closest("form"))){var n="";$("#ddlBoxTypes").val()!=""&&(n+=$("#ddlBoxTypes").val(),n+=" ");$("#ddlFlatTypes").val()!=""&&(n+=$("#ddlFlatTypes").val(),n+=" ");e.isMailing&&$("#ddlAddressTypes option:selected").val().toLowerCase()=="yes"?(n+=$("#txtBox").val(),n+=" "):($("#txtFlatNumber").val()!=null&&$("#txtFlatNumber").val()!=undefined&&(n+=$("#txtFlatNumber").val(),n+=" "),n+=$("#txtStreetNumber").val(),n+=" ",n+=$("#txtStreetName").val(),n+=" ",n+=$("#txtStreetType").val(),n+=" ");n+=$("#txtSuburb").val();n+=" ";n+=$("#txtPostcode").val();$("#ddlCountries").val()=="AUS"&&$("#ddlStates").val()!==""?(n+=" ",n+=$("#ddlStates option:selected").text()):(n+=" ",n+=$("#ddlCountries option:selected").text());e.qasStringEvent.publish(e.getQasEventParams(e.setAddr(),n));$(".qas-address-dialog").slideUp(function(){f&&f();e.isMailing?$("#MailingAddress1")[0].scrollIntoView(!0):$("#ResidentialAddress1")[0].scrollIntoView(!0)})}else r&&r()});this.getQasEventParams=function(n,t){return{jsonString:n,isMailingAddr:e.isMailing,isOriginal:e.isOriginal,serviceFailed:e.serviceFailed,addrForDisplay:t}}};da.ui.QasWidget.prototype={isValid:function(){self.isMailing?($(".box").show(),$(".flat-number").hide(),$(".street-number").hide(),$(".street-name").hide(),$(".street-type").hide()):($(".box").hide(),$(".flat-number").show(),$(".street-number").show(),$(".street-name").show(),$(".street-type").show())}};da.provide("da.ui.SpinnerWidget");da.ui.SpinnerWidget=function(n){this._opts={lines:9,length:5,width:4,radius:4,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:70,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"};this._target=$(n)[0];this._spinner=null};da.ui.SpinnerWidget.prototype={show:function(){this._target!==undefined&&(this._spinner=new Spinner(this._opts).spin(this._target))},hide:function(){this._spinner&&this._spinner.stop()}};da.provide("da.ui");da.ui.YesNoWidget=function(n,t,i,r){this._parent=$(n);this._widget=$("#yesnowidget").find(".yesno-widget");this._message=t;this._yesLabel="Yes";this._noLabel="No";this._parent.hide();this._shown=!1;this.yesCallBack=i;this.noCallBack=r};da.ui.YesNoWidget.prototype={show:function(n){var i,t;this._shown||(i=this,this._shown=!0,t=this._widget.clone(),t.find(".message").html(this._message),t.find(".no-button").html(this._noLabel),t.find(".yes-button").html(this._yesLabel),n&&(this._parent=$(n)),this._parent.append(t),this._parent.find(".yes-button").click(function(n){i.yesCallBack&&i.yesCallBack(n)}),this._parent.find(".no-button").click(function(n){i.noCallBack&&i.noCallBack(n)}),t.show(),this._parent.show())},hide:function(){this._shown=!1;this._parent.hide();this._parent.find(".yesno-widget").remove()},isShowing:function(){return this._shown},setYesLabel:function(n){this._yesLabel=n},setNoLabel:function(n){this._noLabel=n}};da.provide("da.util.AjaxRequest");da.util.AjaxRequest=function(n,t,i,r,u){var f=da.AdminUrl;this._dfd=$.Deferred();this._config={url:(u?u:da.PlatformUrl)+"?u="+encodeURIComponent(n),data:i==="POST"?JSON.stringify(t,function(n,t){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(t)){var i=moment(t);return i.format(da.global("jsondateformat"))}return t}):t,dataType:"json",headers:{Accept:"application/json; charset=utf-8"},contentType:"application/json; charset=utf-8",type:i?i:"GET",cache:!1,converters:{"text json":function(n){return window.JSON.parse(n,function(n,t){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(t)?moment(t,da.global("jsondateformat")):t})}}};this._showCustomError=r};da.util.AjaxRequest.prototype={ShowCustomError:function(n){return n!==undefined&&n!==null&&(this._showCustomError=n),this._showCustomError},Config:function(){return this._config},Deferred:function(){return this._dfd}};da.provide("da.vm");da.require("dust");da.vm.BaseVM=function(){this._templateName="";this._template={};this._initDone=!1;this._data=[]};da.vm.BaseVM.prototype={initDone:function(n){return this._initDone=n||this._initDone,this._initDone},compile:function(n){try{var t=$(n);this._templateName=t.attr("data-name");this._template=dust.compile(t.html(),this._templateName);dust.loadSource(this._template)}catch(i){da.log("unable to compile template: "+n,i)}},render:function(n,t){try{this._data=n;var i=dust.makeBase(this);dust.render(this._templateName,i.push(n),function(n,i){$(t).html(i)})}catch(r){da.log("unable to render template: "+t,r)}}};da.provide("da.events");da.events.PubSub=function(n){this.name=n;this._callbacks=$.Callbacks()};da.events.PubSub.prototype={subscribe:function(n){this._callbacks.add(n)},publish:function(n){this._callbacks.fire(n)}};da.provide("da.factor2.Factor2Ctrl");da.require("da.services");da.factor2.Factor2Ctrl=function(){var n=this;this.eventService=null;this.dataService=null;this._isFactor2Page=null;da.injector.inject(this);this._challengeEntered=this.eventService.createEvent("Factor2ChallengeEntered");this._challengeRemoved=this.eventService.createEvent("Factor2ChallengeRemoved");this._submitChallenge=this.eventService.createEvent("SubmitChallenge");this._isFactor2Page=$("#factor2-form").length>0;this._smsCodeRequested=this.eventService.createEvent("SmsCodeRequested");this.onCodeModified=function(t){n.isValidCode(t)?(n._challengeEntered.publish(),n._isFactor2Page&&n.enableValidate()):(n._challengeRemoved.publish(),n.disableValidate())};this.processEnteredCode=function(t,i){var r=$(t).val();n.onCodeModified(r);n.isValidCode(r)&&n.enterKeyPressed(i)};$("#SmsCode").keyup(function(t){n.processEnteredCode(this,t)});$("#VipCode").keyup(function(t){n.processEnteredCode(this,t)});$("#VipCode").bind("paste",function(){var t=this;setTimeout(function(){var i=$(t).val();n.onCodeModified(i)},100)});this.enterKeyPressed=function(t){t.keyCode==13&&(n._isFactor2Page?$("#validate-factor2-code").click():n._submitChallenge.publish())};this.isValidCode=function(n){return n&&n.length==6};this.disableValidate=function(){var n=$("#validate-factor2-code");n.attr("disabled","disabled");n.addClass("disabled")};this.enableValidate=function(){var n=$("#validate-factor2-code");n.removeAttr("disabled");n.removeClass("disabled")};$("#validate-factor2-code").click(function(t){var i;t.preventDefault();i=$(this);i.closest("#vip-inline-section")&&n._submitChallenge.publish();var r=i.attr("data-factor2-function"),u=da.factor2.Factor2Ctrl.getCode(),f={Function:r,Code:u.trim()};n.disableValidate();n.dataService.load("factor2/challengeresponse",f,"POST",!0).done(function(t){t.Valid?$.get("/cleardata.axd?factor2").done(function(){location.href=location.href}):(n.hideSuccessMessage(),n.showErrorMessage("Entered Factor 2 challenge is not valid."),n.enableValidate())}).fail(function(t){var r,i;da.factor2.Factor2Ctrl.hideSuccessMessage();da.factor2.Factor2Ctrl.clearCodeField();r=da.factor2.Factor2Ctrl.getErrorMessage(t);da.factor2.Factor2Ctrl.showErrorMessage(r);da.helpers.enableButton(".send-sms-code-button",!1);i=$.parseJSON(t.responseText).Code;i=="F00003"||i=="F00005"?(da.factor2.Factor2Ctrl.hideCodeField(),da.helpers.enableButton(".send-sms-code-button",!0),n.disableValidate()):i=="F00002"?(da.helpers.enableButton(".send-sms-code-button",!0),n.disableValidate()):i=="F00021"?n.disableValidate():i=="F00008"?(da.factor2.Factor2Ctrl.hideCodeField(),da.factor2.Factor2Ctrl.disableCodeField()):n.enableValidate()})});$(document).on("click",".send-sms-code-button",function(){var i=$(this),t;da.helpers.enableButton(".send-sms-code-button",!1);da.factor2.Factor2Ctrl.clearCodeField();da.factor2.Factor2Ctrl.hideErrorMessage();n._smsCodeRequested.publish();t=da.factor2.Factor2Ctrl.populateFactor2Data(!0);n.dataService.load("factor2/requestchallenge",t,"POST",!0).done(function(n){$("#SmsSignature").val(n.BatchSignature);da.factor2.Factor2Ctrl.showSuccessMessage()}).fail(function(n){var t=da.factor2.Factor2Ctrl.getErrorMessage(n);da.factor2.Factor2Ctrl.showErrorMessage(t);da.helpers.enableButton(".send-sms-code-button",!0)})});$(".send-sms-code-only-button").click(function(){var u=$(this),i,r,t;da.helpers.enableButton(".send-sms-code-only-button",!1);da.factor2.Factor2Ctrl.clearCodeField();da.factor2.Factor2Ctrl.hideErrorMessage();n._smsCodeRequested.publish();t=$("#sms-use-preferred-number").val();r=t!=null?t:$("#sms-reg-number-id").val();i={Function:$("input[name='Factor2Function']").val(),Param:$("input[name='Factor2Param']").val(),SMSNumberId:r};n.dataService.load("factor2/RequestChallengeOnSmsRegistration",i,"POST",!0).done(function(){da.factor2.Factor2Ctrl.showSuccessMessage()}).fail(function(n){var t=da.factor2.Factor2Ctrl.getErrorMessage(n);da.factor2.Factor2Ctrl.showErrorMessage(t);da.helpers.enableButton(".send-sms-code-only-button",!0)})});$("#RubikRetryButton").click(function(){location.reload()});da.factor2.Factor2Ctrl.setFunction=function(n){$("input[name='Factor2Function']").val(n)};da.factor2.Factor2Ctrl.clearCodeField=function(){$("#SmsCode").val("");$("#VipCode").val("");$("#AuthentiKey").val("")};da.factor2.Factor2Ctrl.getCode=function(){var n=$("#SmsCode"),t=$("#VipCode"),i=$("#AuthentiKey");return n.length>0?n.val():t.length>0?t.val():i.length>0?i.val():null};da.factor2.Factor2Ctrl.getSmsNumberId=function(n){if(!n)return null;var t=$("select[name='SMSNumberId']").val();return t||(t=$("input[name='SMSNumberId']").val()),t};da.factor2.Factor2Ctrl.showSuccessMessage=function(){$("#factor2-code-success-text").show();$("#factor2-code-success").show();$("#sms-code-div").show();$("#SmsSignature").val()&&($("#sms-code-signature").show(),$("#sms-code-signature-explanation").show())};da.factor2.Factor2Ctrl.hideSuccessMessage=function(){$("#factor2-code-success-text").hide();$("#factor2-code-success").hide()};da.factor2.Factor2Ctrl.showErrorMessage=function(n){da.log(n);$("#factor2-code-error-text").text(n).css("display","block");$("#factor2-code-error").show()};da.factor2.Factor2Ctrl.getErrorMessage=function(n){var t=da.errorMessages($.parseJSON(n.responseText).Code);return t||(t=$.parseJSON(n.responseText).Message),t};da.factor2.Factor2Ctrl.populateFactor2Data=function(n){if(da.transfers&&typeof da.transfers.getFactor2ChallengeRequestData==typeof Function)return da.transfers.getFactor2ChallengeRequestData(n);if(da.transfers&&typeof da.transfers.getFactor2DataScheduledTransfers==typeof Function)return da.transfers.getFactor2DataScheduledTransfers(n);if(da.batches&&da.batches&&da.batches.summary&&typeof da.batches.summary.getFactor2DataBusinessBanking==typeof Function)return da.batches.summary.getFactor2DataBusinessBanking(n);if(da.batches&&da.enhancement&&typeof da.enhancement.getFactor2DataBusinessBanking==typeof Function)return da.enhancement.getFactor2DataBusinessBanking(n);var t=da.factor2.Factor2Ctrl.getSmsNumberId(n);return{Function:$("input[name='Factor2Function']").val(),Param:$("input[name='Factor2Param']").val(),SMSNumberId:t}};da.factor2.Factor2Ctrl.hideErrorMessage=function(){$("#factor2-code-error-text").hide();$("#factor2-code-error").hide()};da.factor2.Factor2Ctrl.hideCodeField=function(){da.factor2.Factor2Ctrl.clearCodeField();$("#sms-code-div").hide();$("#sms-code-signature").hide();$("#sms-code-signature-explanation").hide()};da.factor2.Factor2Ctrl.disableCodeField=function(){$(".vip-push-link").hide();var n=$("#VipCode");n.length>0&&(n.prop("disabled","disabled"),n.parent()&&n.parent().addClass("disabled"))};da.factor2.Factor2Ctrl.removeFactor2Challenge=function(){$("#factor2-dialog").remove()};da.factor2.Factor2Ctrl.hasFactor2Challenge=function(){return $("#factor2-dialog").length>0};$(".content-header-section").each(function(n,t){$("#factor2-form").length&&!$(t).hasClass("f2-header")&&$(t).hide()});da.factor2.Factor2Ctrl.createFactor2EventHandlers=function(t){$.each([{func:"Factor2ChallengeEntered",passed:!0},{func:"Factor2ChallengeRemoved",passed:!1},{func:"Factor2ChallengePassed",passed:!0}],function(i,r){n.eventService.subscribe(r.func,function(){t(r.passed,r.func)})})}};da.onInit(function(){new da.factor2.Factor2Ctrl});da.provide("da.helpers");var logoutUrl=null,timeout=0,sessionTime=new Date;da.helpers.formatCurrency=function(n){var t=new Number(n);return t.toFixed(2).replace(/(\d)(?=(\d{3})+\.\d\d$)/g,"$1,")};da.helpers.formatCurrencyNoDecimal=function(n){var t=new Number(n);return t.toFixed(0).replace(/(\d)(?=(\d{3})+\.\d\d$)/g,"$1,")};da.helpers.formatBalanceWithCommaNoDecimal=function(n){var t=new Number(n);return t.toLocaleString().replace(/(\d)(?=(\d{3})+\.\d\d$)/g,"$1,")};da.helpers.apostropheFormat=function(n){return n.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')};da.helpers.formatBalance=function(n,t,i){var r=da.helpers.formatCurrency(n).split("."),u=r[0],f=r[1];return i&&(u="<span class='amount'>"+r[0]+"<\/span>"),t&&(f="<span class='cents'>"+r[1]+"<\/span>"),"<span class='dollar'>$<\/span>"+u+"."+f};da.helpers.queryParam=function(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]===n)return i[1];return undefined};da.helpers.isPrintMode=function(){return da.helpers.queryParam("print")?!0:!1};da.helpers.parseDate=function(n){return typeof n=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(n)?moment(n,da.global("jsondateformat")):moment(n)};da.helpers.getMomentDateObject=function(n){var t;return $(n).attr("type").toLowerCase()=="date"?(t=moment($(n).val()),t.isValid()||(t=moment($(n).val(),"DD/MM/YYYY"))):t=moment($(n).val(),"DD/MM/YYYY"),t};da.helpers.getMomentShortDateObject=function(n){var t=moment(moment($(n).val()).format("DD/MM/YYYY"),"DD/MM/YYYY");return Modernizr.touch&&Modernizr.inputtypes.date||($(n).attr("type").toLowerCase()=="date"?(t=moment(moment($(n).val(),"DD/MM/YY").format("DD/MM/YYYY")),t.isValid()||(t=moment(moment($(n).val(),"DD/MM/YY").format("DD/MM/YYYY"),"DD/MM/YYYY"))):t=moment(moment($(n).val(),"DD/MM/YY").format("DD/MM/YYYY"),"DD/MM/YYYY")),t};da.helpers.setMomentDateObject=function(n,t){var i=$(n);if(!t){i.val("");return}i.attr("type").toLowerCase()=="date"?i.val(t.format("YYYY-MM-DD")):i.val(t.format("DD/MM/YYYY",t))};da.helpers.getMomentDateObjectFromAttribute=function(n,t){var i=moment($(n).attr(t));return i.isValid()&&i.toString()==t||(i=moment($(n).attr(t),"DD/MM/YYYY")),i};da.helpers.validateDateValue=function(n,t){var i=da.helpers.getMomentDateObject(n);return i.isValid()&&i.isBefore("2051-01-01")&&i.isAfter(moment(t,da.global("jsondateformat")).subtract(1,"days"))&&i.isAfter(moment().subtract(1,"days"))};da.helpers.formatDateAsDOW=function(n){var t=moment(new Date(n));return da.helpers.queryParam("print")?t.format("DD MMMM YY"):t.calendar()};da.helpers.formatDateAsStandard=function(n){var t=moment(new Date(n));return t.format("DD/MM/YYYY")};da.helpers.formatShortDate=function(n){var t=moment(new Date(n));return t.format("DD/MM/YY")};da.helpers.formatDateAsDDMMMMYYYY=function(n){var t=moment(new Date(n));return t.format("DD MMMM YYYY")};da.helpers.formatDateAsDDMMMYYYY=function(n){var t=moment(new Date(n));return t.format("DD MMM YYYY")};da.helpers.formatDateAsFullDate=function(n){var t=moment(new Date(n));return t.format("DD MMM YYYY - dddd")};da.helpers.formatDateWithTime=function(n,t){var r=moment(new Date(n)),i="";return t&&t==="true"&&(i=" "+da.global("timezonesuffix")),r.format("DD MMM YYYY h:mma")+i};da.helpers.formatShortDateWithTime=function(n,t){var r=moment(new Date(n)),i="";return t&&t==="true"&&(i=" "+da.global("timezonesuffix")),r.format("DD/MM/YY hh:mma")+i};da.helpers.formatDateWithTimeMail=function(n){var t=moment(new Date(n));return t.format("DD MMM YYYY hh:mm A")};da.helpers.formatDateAsMMYY=function(n){var t=moment(new Date(n));return t.format("MMYY")};da.helpers.formatToShortTime=function(n){var t=moment(new Date(n));return t.format("HH:mm")};da.helpers.formatToTime=function(n){var t=moment(new Date(n));return t.format("h:mma")};da.helpers.formatTime=function(n,t){var r=moment(new Date(n)),i="";return t&&t==="true"&&(i=" "+da.global("timezonesuffix")),r.format("h:mm A")+i};da.helpers.formatDate=function(n,t,i){var r=i?moment(n,i):moment(new Date(n));return t?r.format(da.global("longdateformat")):r.format(da.global("shortdateformat"))};da.helpers.convertDateFormat=function(n){return n.replace(/m/g,"M").replace(/D/g,"d").replace(/Y/g,"y")};da.helpers.applyTimezone=function(n){var t=da.global("timezoneoffset")-da.global("timezonebase");return n.add(t,"minutes")};da.helpers.formToJson=function(n){var t={};return $.each(n,function(n,i){t[i.name]=i.value}),t};da.helpers.resetTimeout=function(){da.injector.get("sessionService").resetTimeout()};da.helpers.keepAliveOrDie=function(){da.injector.get("sessionService").keepAlive()};da.helpers.isStringNullOrEmpty=function(n){return n=n?n.trim():n,!n};da.helpers.isWindowsPhone=function(){return/windows phone/i.test(navigator.userAgent.toLowerCase())};da.helpers.isAndroidPhone=function(){return/(android)/i.test(navigator.userAgent)};da.helpers.elementIsCurrentlyInView=function(n){var t=$(window).scrollTop(),r=t+$(window).height(),i=$(n).offset().top,u=i+$(n).height();return u<=r&&i>=t};da.helpers.removeOutlineOnClick=function(n){for(var t=0;t<n.length;t++)n[t].onmousedown=function(){this.blur();this.hideFocus=!0;this.style.outline="none"},n[t].onmouseout=n[t].onmouseup=function(){this.blur();this.hideFocus=!1;this.style.outline=null}};da.helpers.htmlEncode=function(n){return $("<div/>").text(n).html()};da.helpers.htmlDecode=function(n){return $("<div/>").html(n).text()};da.helpers.htmlDecodeText=function(n){var t=da.helpers.htmlDecode(n);return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")};da.helpers.isFileUploadSupported=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var n=document.createElement("input");return n.type="file",!n.disabled};da.helpers.clickOnSpaceAndFocus=function(n,t,i){n.which==32&&($(t).prop("tagName")=="DIV"&&$(t).find("label:first").length?$(t).find("label:first").click():t.click(),$(i).focus(),n.preventDefault())};da.helpers.clickOnSpaceOrEnterAndFocus=function(n,t,i){(n.which==32||n.which==13)&&($(t).prop("tagName")=="DIV"&&$(t).find("label:first").length?$(t).find("label:first").click():t.click(),$(i).focus(),n.preventDefault())};da.helpers.enableButton=function(n,t){t?($(n).removeAttr("disabled"),$(n).hasClass("disabled")&&$(n).removeClass("disabled")):($(n).attr("disabled",!0),$(n).hasClass("disabled")||$(n).addClass("disabled"))};da.helpers.element_in_scroll=function(n){var t=$(window).scrollTop(),r=t+$(window).height(),i=$(n).offset().top,u=i+$(n).height();return u<=r&&i>=t};da.helpers.checkHasUnicode=function(n){var t=/^[\x00-\x7F]*$/.test(n);return!t};da.helpers.encode=function(n){var e,s;if(arguments.length!==1)throw new SyntaxError("Not enough arguments");e={};e.PADCHAR="=";e.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var o=e.PADCHAR,i=e.ALPHA,f=function(n,t){var i=n.charCodeAt(t);if(i>255)throw function(){var n;try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){return n=new Error("DOM Exception 5"),n.code=n.number=5,n.name=n.description="INVALID_CHARACTER_ERR",n.toString=function(){return"Error: "+n.name+": "+n.message},n}};return i},r,t,u=[];if(n=""+n,s=n.length-n.length%3,n.length===0)return n;for(r=0;r<s;r+=3)t=f(n,r)<<16|f(n,r+1)<<8|f(n,r+2),u.push(i.charAt(t>>18)),u.push(i.charAt(t>>12&63)),u.push(i.charAt(t>>6&63)),u.push(i.charAt(t&63));switch(n.length-s){case 1:t=f(n,r)<<16;u.push(i.charAt(t>>18)+i.charAt(t>>12&63)+o+o);break;case 2:t=f(n,r)<<16|f(n,r+1)<<8;u.push(i.charAt(t>>18)+i.charAt(t>>12&63)+i.charAt(t>>6&63)+o)}return u.join("")};da.helpers.cleanPath=function(n){return n.replace(/^C:\\fakepath\\/,"")};da.helpers.setCookieForDisplay=function(n,t){$.cookie(n,t?"sw":"hd",{path:"/"})};da.helpers.getCookieForDisplay=function(n){return $.cookie(n)==="hd"?!1:$.cookie(n)==="sw"?!0:null};da.helpers.getCookie=function(n){return $.cookie(n)};da.helpers.setCookie=function(n,t){$.cookie(n,t,{path:"/"})};da.helpers.removeCookie=function(n){$.removeCookie(n,{path:"/"})};da.helpers.callbackAfterRender=function(n,t){setTimeout(function(){$(n).length>0?t():da.helpers.callbackAfterRender(n,t)},50)};da.helpers.doScroll=function(n,t){t?$("html, body").animate({scrollTop:n.offset().top-20},"slow",t):$("html, body").animate({scrollTop:n.offset().top-20},"slow")};da.helpers.scrollToOpenDialog=function(n,t,i,r){var u=$(n+":visible").closest(t);u.offset()&&(i||!da.helpers.elementIsCurrentlyInView(u))&&da.helpers.doScroll(u,r)};da.helpers.scrollToElement=function(n,t,i){n.offset()&&(t||!da.helpers.elementIsCurrentlyInView(n))&&da.helpers.doScroll(n,i)};da.helpers.scrollToScreenTop=function(n,t){n.offset()&&!da.helpers.elementIsCurrentlyInView(n)&&(t?$("html, body").animate({scrollTop:0},"slow",t):$("html, body").animate({scrollTop:0},"slow"))};da.helpers.createHiddenElement=function(n,t,i){var r=document.createElement("input");r.setAttribute("type","hidden");r.setAttribute("name",t);r.setAttribute("value",i);n.append(r)};da.helpers.stringFormat=function(n,t){return $.each(t,function(t,i){var r=new RegExp("\\{"+t+"\\}","gm");n=n.replace(r,i)}),n};da.helpers.safelyParseJSON=function(n){var t;try{t=JSON.parse(n)}catch(i){t=n}return t};da.helpers.formattedErrorMessage=function(n,t){try{return da.helpers.stringFormat(n,da.helpers.safelyParseJSON(t))}catch(i){return n}};da.helpers.htmlDecodeAndClean=function(n){return $.trim(da.helpers.htmlDecodeText(n)).replace(/\"/g,"'").replace(/\''/g,"'")};da.helpers.validateBsb=function(n,t,i){return n==undefined||t==undefined||t.length===0?!0:(i==undefined&&(i=!1),n.load("transaction/ValidateExternalBsb",{Bsb:t,AllowSameFI:i},"POST").promise())};da.helpers.forceCustomValidation=function(n){$(".error.alert-box[for='"+n.data.name+"']").show()};da.helpers.validateDecimal=function(n){var t=new RegExp(/^\d*(\.\d{1,2})?$/);return t.test(n)};da.helpers.removeUnicodeChars=function(n){return n==undefined?"":n.replace(/[^\x00-\x7F]/g,"")};da.helpers.formatCreditCard=function(n){return n==undefined?"":(n.length>12&&(n=n.slice(0,12)+"&nbsp;&nbsp;"+n.slice(12),n=n.slice(0,8)+"&nbsp;&nbsp;"+n.slice(8),n=n.slice(0,4)+"&nbsp;&nbsp;"+n.slice(4)),n)};da.helpers.formatExpireDate=function(n){return n==undefined?"":n===!1?"":(n.length===4&&(n=n.slice(0,2)+"/"+n.slice(2)),n)};da.helpers.addIEPolyFill=function(){navigator.userAgent.indexOf("MSIE 9")!==-1&&document.addEventListener("selectionchange",function(){var n=document.activeElement,t;(n.tagName==="TEXTAREA"||n.tagName==="INPUT"&&n.type==="text")&&(t=document.createEvent("CustomEvent"),t.initCustomEvent("input",!0,!0,{}),n.dispatchEvent(t))})};da.helpers.getRemainingCharactersCount=function(n,t){var i=n.val(),u=0,r;return i&&(r=i.match(/\n/g),r?(u=r.length+i.length,$(n).attr("maxLength",t-parseInt(r.length))):(u=i.length,$(n).attr("maxLength",t))),t-u};da.helpers.b64toBlob=function(n,t,i){var e,o,r,f,s,u,h;for(t=t||"",i=i||512,e=atob(n),o=[],r=0;r<e.length;r+=i){for(f=e.slice(r,r+i),s=new Array(f.length),u=0;u<f.length;u++)s[u]=f.charCodeAt(u);h=new Uint8Array(s);o.push(h)}return new Blob(o,{type:t})};da.helpers.stripHtml=function(n){return n.replace(/(<([^>]+)>)/ig,"")};da.helpers.getBodyLengthCountNewLineAsTwoChars=function(n,t,i){var r=n?t.length:i.length,u=n?t:i,f=u.split("\n");return r+(f.length-1)};da.helpers.formatTrueFalse=function(n){return n==="true"?"Yes":n==="false"?"No":"-"};da.helpers.formatBoolean=function(n){return n==="true"?"True":"False"};da.helpers.formatEmptyDash=function(n){return da.helpers.isStringNullOrEmpty(n)?"-":n};da.helpers.formatReadableMb=function(n){return da.helpers.isStringNullOrEmpty(n)?"-":n<1e3?n+" MB":(n/1e3).toFixed(2)+" GB"};da.helpers.isMobileMode=function(){return $(window).width()<768};da.helpers.getPlatformHeaders=function(){return{"MP-API-KEY":da.PublicApiKey,"MP-DEVICE-ID":da.helpers.getCookie("DigitalBankingDevice"),"MP-AUTH-TOKEN":da.helpers.getCookie("DigitalBankingAuthToken")}};da.helpers.showErrorMessage=function(n,t){var i="",r=t!=null?t:$(".error-div .error");i=n!=null&&n.Code!=null?da.errorMessages(n.Code)?da.errorMessages(n.Code):n.Message:da.errorMessages("DEFAULT");r.parent().show();r.html(i).fadeIn()};da.helpers.checkIsAusState=function(n){var t=n.toLowerCase();return["vic","nsw","qld","sa","wa","act","tas","nt"].includes(t)};da.helpers.substringWithElipses=function(n,t){return n&&n.length>t?n.substring(0,t)+"...":n};da.provide("da.helpers.sort");da.helpers.sort.byDateAndString=function(n,t,i){var r=function(n,t){return t===null?-1:n===null?1:n>t?1:n<t?-1:0};return n.sort(function(n,u){var e=n[t].valueOf(),o=u[t].valueOf(),s=da.helpers.isStringNullOrEmpty(n[i])?null:n[i].toLowerCase(),h=da.helpers.isStringNullOrEmpty(u[i])?null:u[i].toLowerCase(),f=-r(e,o);return f===0?-r(s,h):f})};da.helpers.sort.byStringAndDate=function(n,t,i){var r=function(n,t){return t===null?-1:n===null?1:n>t?1:n<t?-1:0};return n.sort(function(n,u){var e=n[i].valueOf(),o=u[i].valueOf(),s=da.helpers.isStringNullOrEmpty(n[t])?null:n[t].toLowerCase(),h=da.helpers.isStringNullOrEmpty(u[t])?null:u[t].toLowerCase(),f=r(s,h);return f===0?r(e,o):f})};da.provide("da.unicodehelpers");da.unicodehelpers.getUnicodeChars=function(n,t){t=typeof t!="undefined"?t:!0;var r=da.helpers.apostropheFormat(n),i=r.match(/([\uD800-\uDBFF][\uDC00-\uDFFF]|[^\x00-\x7F])/g);return t&&i?i.filter(function(n,t,i){return i.indexOf(n)===t}):i};da.unicodehelpers.strLength=function(n){var t=n;return String.prototype.normalize&&(t=n.normalize()),Array.from(t).length};da.provide("da.util.validation");da.util.validation.validateAmountFormat=function(n){var t=new RegExp(/(?!^[0|.]*$)(^([0-9]|[1-9][0-9]{1,9})(\.\d{1,2})?$)/),i=new RegExp(/^\d*(\.\d{1,2})?$/);return n!=NaN&&n>0&&i.test(n)&&t.test(n)};da.util.validation.validateAmountFormatAllowZero=function(n){var t=new RegExp(/(?!^[.]*$)(^([0-9]|[1-9][0-9]{1,9})(\.\d{1,2})?$)/),i=new RegExp(/^\d*(\.\d{1,2})?$/);return n!=NaN&&n>=0&&i.test(n)&&t.test(n)};da.util.validation.validateAnyAmountFormat=function(n){var t=new RegExp(/(^(-?)([0-9]|[1-9][0-9]{1,8})(\.[0-9]{1,2})?$)/),i=new RegExp(/^(-?)\d*(\.\d{1,2})?$/);return n!=NaN&&i.test(n)&&t.test(n)};da.util.validation.validateDateFormat=function(n,t){return t.getAttribute("type").toLowerCase()=="date"||n.match(/^\d\d\/\d\d\/(?:\d{4})$/)};da.util.validation.validateDateValue=function(n,t){var i="#"+t.id,r,u="DD/MM/YYYY";return $(i).attr("type").toLowerCase()==="date"&&(u="YYYY-MM-DD"),r=moment($(i).val(),u),r.isValid()};da.util.validateTextPattern=function(n,t){return da.helpers.isStringNullOrEmpty(n)||t.test(n)&&!/(&#)/.test(n)};da.util.validation.validateAddressLine=function(n){return da.helpers.isStringNullOrEmpty(n)||/^[\w \+\-$!&()\.,\/#=;:\'\^\*]*$/.test(da.helpers.apostropheFormat(n))&&!/(&#)/.test(n)};da.util.validation.validateTextField=function(n){return da.helpers.isStringNullOrEmpty(n)||/^[A-Za-z0-9 \-+_*!$&()/.,:;]*$/.test(n)};da.util.validation.validateEmailField=function(n){return da.util.validateTextPattern(da.helpers.apostropheFormat(n),/^(([^<>()[\]\\.,;:\s@\""]+(\.[^<>()[\]\\.,;:\s@\""]+)*)|(\"".+\""))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,15}))$/)};da.util.validation.validateNameField=function(n){return da.helpers.isStringNullOrEmpty(n)||/^[a-zA-Z\- \'.,0-9&/()]*$/.test(da.helpers.apostropheFormat(n))};da.util.validation.validatePayeeNameField=function(n){return da.util.validateTextPattern(da.helpers.apostropheFormat(n),/^[\w \+\-$!&()\.,/#=;:\'\^\*]*$/)};da.util.validation.validatePaymentReferenceField=function(n){return da.util.validateTextPattern(da.helpers.apostropheFormat(n),/^[\w \+\-$!&()\.,/#=;:\'\^\*]*$/)};da.util.validation.validateOptionalDescriptionField=function(n){return da.util.validateTextPattern(da.helpers.apostropheFormat(n),/^[\w \+\-$!&()\.,/#=;:\'\^\*]*$/)};da.util.validation.validateUnicodeDescriptionField=function(n){return da.util.validateTextPattern(n,/^[^<]*$|^[^<]*(<[^a-zA-Z<\/][^<]*)*$/)};da.util.validation.validateMobileNumber=function(n){return/^\(*0(\)*\d\s*){8,11}\s*$|^[0-9]{8,13}$|^[0-9]{1,5}[*]{1,8}[0-9]{1,7}$/.test(n)};da.util.validation.validateAusMobileNumber=function(n){return/^(0|([0-9]{2}))[4]{1}[0-9]{8}$/.test(n)};da.util.validation.validatePassword=function(n){return!/<[a-zA-Z\/]|(&#)/.test(n)};da.util.validation.validatePasscode=function(n){return!/<[a-zA-Z\/]/.test(n)};da.util.validation.validateNoScripting=function(n){return!/<[a-zA-Z\/]/.test(n)};da.util.validation.validateIdCheckPasscode=function(n){return/^[a-zA-Z0-9]{6,}$/.test(n)};da.util.validation.validatePhoneExt=function(n){return/^[0-9]{0,6}$/.test(n)};da.util.validation.validatePostCode=function(n){return/^\s*[0-9]{4}\s*$/.test(n)};da.util.validation.validatePostCodeInternational=function(n){return/^[0-9a-z\- A-Z]{4,10}$/.test(n)};da.util.validation.validateCredential=function(n){return/^[a-zA-Z0-9]*$/.test(n)};da.util.validation.validateSecurityCode=function(n){return/^[0-9]*$/.test(n)};da.util.validation.validateAlphanumbericChars=function(n){return/^[a-zA-Z0-9]*$/.test(n)};$.validator&&$.validator.addMethod("text",function(n,t){return da.util.validation.validateTextField(n,t)},"Valid Characters for a text field are A-z 0-9 and -+_*!$&().,:;/");$.validator.addMethod("RequireFromGroup",function(n,t,i){var r=$(i[1],t.form),u=r.eq(0),f=u.data("valid_req_grp")?u.data("valid_req_grp"):$.extend({},this),e=r.filter(function(){return f.elementValue(this)}).length>=i[0];return u.data("valid_req_grp",f),$(t).data("being_validated")||(r.data("being_validated",!0),r.each(function(){f.element(this)}),r.data("being_validated",!1)),e},$.validator.format("Please fill at least {0} of these fields."));$.validator&&$.validator.addMethod("email",function(n,t){return da.util.validation.validateEmailField(n,t)},"Invalid email address format.");da.util.validation.validateStaffUsernameField=function(n){return/^[a-zA-Z0-9_]{1,30}$/.test(n)};da.util.validation.validateStaffSearchField=function(n){return/^[a-zA-Z0-9_]{0,30}$/.test(n)};da.util.validation.validateMessageCategory=function(n){return/^[A-Za-z0-9 \r\n\\\-\+_\*\!\$\&\(\)\#\/\"\'\=\[\]\?\@\~\`\.\,\:\^\%;]*$/.test(da.helpers.apostropheFormat(n))};da.util.validation.validateHtmlXmlTags=function(n){return!/<[a-zA-Z\!\/\?]/gi.test(n)};da.util.validation.getHtmlXmlTags=function(n){return n.match(/<[a-zA-Z\!\/\?][^\s]*/gi)};da.util.validation.validateDocumentTypeName=function(n){return da.helpers.isStringNullOrEmpty(n)||/^[A-Za-z0-9 \-+_\'*!$&()/.,:;]*$/.test(da.helpers.apostropheFormat(n))};da.util.validation.printableASCII=function(n){return/^[\x20-\x7E]*$/.test(n)};da.util.validation.validateAscii=function(n){return/^[\x00-\x7F]*$/.test(n)};da.util.validation.validateAsciiExtended=function(n){return/^[\x00-\xFF]*$/.test(n)};da.util.validation.validateNumbersOnly=function(n){return/^\s*[0-9]*\s*$/.test(n)};